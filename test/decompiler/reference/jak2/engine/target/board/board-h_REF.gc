;;-*-Lisp-*-
(in-package goal)

;; definition of type board
(deftype board (process-drawable)
  ((control       control-info  :offset 128)
   (shadow-backup shadow-geo    :offset 208)
   (main          joint-mod     :offset 212)
   )
  :heap-base #x60
  :method-count-assert 23
  :size-assert         #xd8
  :flag-assert         #x17006000d8
  (:methods
    (idle (symbol) _type_ :state 20)
    (use () _type_ :state 21)
    (hidden () _type_ :state 22)
    )
  )

;; definition for method 3 of type board
(defmethod inspect board ((obj board))
  (when (not obj)
    (set! obj obj)
    (goto cfg-4)
    )
  (let ((t9-0 (method-of-type process-drawable inspect)))
    (t9-0 obj)
    )
  (format #t "~2Tcontrol: ~A~%" (-> obj root))
  (format #t "~2Tstate-time: ~D~%" (-> obj state-time))
  (format #t "~2Tshadow-backup: ~A~%" (-> obj shadow-backup))
  (format #t "~2Tmain: ~A~%" (-> obj main))
  (label cfg-4)
  obj
  )

;; definition of type board-info
(deftype board-info (basic)
  ((board                  uint32                        :offset-assert   4)
   (camera-interp          float                         :offset-assert   8)
   (process                uint32                        :offset-assert  12)
   (board-trans            vector            :inline     :offset-assert  16)
   (board-quat             vector            :inline     :offset-assert  32)
   (board-scale            vector            :inline     :offset-assert  48)
   (main                   joint-mod                     :offset-assert  64)
   (upper-body             basic                         :offset-assert  68)
   (sound-bank-knob        float                         :offset-assert  72)
   (sound-air-knob         float                         :offset-assert  76)
   (wind-sound-id          uint32                        :offset-assert  80)
   (wind-sound-pitch       float                         :offset-assert  84)
   (wind-sound-volume      float                         :offset-assert  88)
   (engine-sound-id        uint32                        :offset-assert  92)
   (engine-sound-pitch     float                         :offset-assert  96)
   (engine-sound-volume    float                         :offset-assert 100)
   (bank-sound-id          uint32                        :offset-assert 104)
   (bank-sound-pitch       float                         :offset-assert 108)
   (bank-sound-volume      float                         :offset-assert 112)
   (ride-sound-id          uint32                        :offset-assert 116)
   (spin-sound-id          uint32                        :offset-assert 120)
   (spin-sound-volume      float                         :offset-assert 124)
   (spin-sound-pitch       float                         :offset-assert 128)
   (up-vector              vector            2 :inline   :offset-assert 144)
   (slow-transv            vector            :inline     :offset-assert 176)
   (board-time             time-frame                    :offset-assert 192)
   (board-get-on-time      time-frame                    :offset-assert 200)
   (in-air-time            time-frame                    :offset-assert 208)
   (stick-lock             basic                         :offset        240)
   (stick-off              basic                         :offset-assert 244)
   (stance-info            ground-tween-info :inline     :offset-assert 248)
   (mods-backup            basic                         :offset-assert 284)
   (attack-id              uint32                        :offset-assert 288)
   (latch?                 symbol                        :offset-assert 292)
   (unstuck-time           time-frame                    :offset        344)
   (stuck-count            int32                         :offset-assert 352)
   (thrust-scale           float                         :offset-assert 356)
   (flip-time              time-frame                    :offset-assert 360)
   (transv-max             meters                        :offset-assert 368)
   (turn-anim-tilt?        symbol                        :offset-assert 372)
   (turn-anim-mag          float                         :offset-assert 376)
   (turn-anim-targ         float                         :offset-assert 380)
   (turn-anim-frame        float                         :offset-assert 384)
   (turn-anim-vel          float                         :offset-assert 388)
   (turn-anim-duck         float                         :offset-assert 392)
   (turn-anim-duck-vel     float                         :offset-assert 396)
   (tilt-anim-frame        vector            :inline     :offset-assert 400)
   (tilt-anim-target       vector            :inline     :offset-assert 416)
   (smack-surface-time     time-frame                    :offset-assert 432)
   (smack-speed            meters                        :offset-assert 440)
   (smack-normal           vector            :inline     :offset-assert 448)
   (glance-time            time-frame                    :offset-assert 464)
   (glance-speed           meters                        :offset-assert 472)
   (glance-in-transv       vector            :inline     :offset-assert 480)
   (glance-out-transv      vector            :inline     :offset-assert 496)
   (glance-normal          vector            :inline     :offset-assert 512)
   (on-flat-time           time-frame                    :offset-assert 528)
   (jump-land-time         time-frame                    :offset-assert 536)
   (slip-factor            float                         :offset-assert 544)
   (ground-on-dir          vector            :inline     :offset-assert 560)
   (ride-time              time-frame                    :offset-assert 576)
   (ride-start-time        time-frame                    :offset-assert 584)
   (ride-button-time       time-frame                    :offset-assert 592)
   (ride-lean-targ         float                         :offset-assert 600)
   (ride-lean              float                         :offset-assert 604)
   (ride-leanv             float                         :offset-assert 608)
   (ride-lean-mag          float                         :offset-assert 612)
   (ride-tilt-targ         float                         :offset-assert 616)
   (ride-tilt              float                         :offset-assert 620)
   (ride-tiltv             float                         :offset-assert 624)
   (ride-tilt-mag          float                         :offset-assert 628)
   (ride-lock              symbol                        :offset-assert 632)
   (ride-lock-on           symbol                        :offset-assert 636)
   (ride-speed             meters                        :offset-assert 640)
   (ride-mode              uint32                        :offset-assert 644)
   (ride-rot               degrees                       :offset-assert 648)
   (ride-rot-old           degrees                       :offset-assert 652)
   (ride-rot-abs           degrees           2           :offset-assert 656)
   (ride-rtv-abs           degrees                       :offset-assert 664)
   (ride-touch-segment     vector            2 :inline   :offset-assert 672)
   (ride-dir               vector            :inline     :offset-assert 704)
   (ride-vertex-length     int16                         :offset-assert 720)
   (ride-vertex-length-old int16                         :offset-assert 722)
   (ride-vertex-base       int16                         :offset-assert 724)
   (ride-vertex-base2      int16                         :offset-assert 726)
   (ride-vertex-index      float                         :offset-assert 728)
   (ride-vertex-index2     float                         :offset-assert 732)
   (ride-vertex-index-old  float                         :offset-assert 736)
   (ride-vertex            vector            3 :inline   :offset-assert 752)
   (ride-segment           vector            :inline     :offset-assert 800)
   (ride-dir-lean          vector            :inline     :offset-assert 816)
   (ride-pad-vector        vector            1 :inline   :offset-assert 832)
   (ride-vertex-old        vector            3 :inline   :offset-assert 848)
   (ride-segment-old       vector            :inline     :offset-assert 896)
   (ride-vertex-trail      vector            128 :inline :offset-assert 912)
   (halfpipe-side-time     time-frame                    :offset-assert 2960)
   (halfpipe-jump-time     time-frame                    :offset-assert 2968)
   (halfpipe-lip-time      time-frame                    :offset-assert 2976)
   (halfpipe-time          time-frame                    :offset-assert 2984)
   (halfpipe-gspot-time    time-frame                    :offset-assert 2992)
   (halfpipe-lip-event     symbol                        :offset-assert 3000)
   (spin-check-time        time-frame                    :offset-assert 3008)
   (spin-time              time-frame                    :offset-assert 3016)
   (spin-start-time        time-frame                    :offset-assert 3024)
   (spin-start-dir         vector            :inline     :offset-assert 3040)
   (spin-control           float                         :offset-assert 3056)
   (spin-ground-start-time time-frame                    :offset-assert 3064)
   (spin-ground-time       time-frame                    :offset-assert 3072)
   (spin-ground-press-time time-frame                    :offset-assert 3080)
   (flip-control           float                         :offset-assert 3088)
   (flip-count             int32                         :offset-assert 3092)
   (trickx-count           int32                         :offset        3144)
   (trotyv-max             degrees                       :offset-assert 3148)
   (trotyv                 degrees                       :offset-assert 3152)
   (troty                  degrees                       :offset-assert 3156)
   (troty-cum              degrees                       :offset-assert 3160)
   (upper-body-rotyv-max   degrees                       :offset        3168)
   (upper-body-rotyv       degrees                       :offset-assert 3172)
   (upper-body-roty        degrees                       :offset-assert 3176)
   (cushion-base           meters                        :offset-assert 3180)
   (cushion-offset         meters                        :offset-assert 3184)
   (shock-offset           meters                        :offset-assert 3188)
   (shock-offsetv          meters                        :offset-assert 3192)
   (shock-rotx             meters                        :offset-assert 3196)
   (trick-count            int32                         :offset        3204)
   (pad                    uint8                         :offset        3399)
   )
  :method-count-assert 11
  :size-assert         #xd48
  :flag-assert         #xb00000d48
  (:methods
    (board-info-method-9 () none 9)
    (board-info-method-10 () none 10)
    )
  )

;; definition for method 3 of type board-info
(defmethod inspect board-info ((obj board-info))
  (when (not obj)
    (set! obj obj)
    (goto cfg-19)
    )
  (format #t "[~8x] ~A~%" obj (-> obj type))
  (format #t "~1Tboard: #x~X~%" (-> obj board))
  (format #t "~1Tcamera-interp: ~f~%" (-> obj camera-interp))
  (format #t "~1Tprocess: #x~X~%" (-> obj process))
  (format #t "~1Tboard-trans: ~`vector`P~%" (-> obj board-trans))
  (format #t "~1Tboard-quat: ~`vector`P~%" (-> obj board-quat))
  (format #t "~1Tboard-scale: ~`vector`P~%" (-> obj board-scale))
  (format #t "~1Tmain: ~A~%" (-> obj main))
  (format #t "~1Tupper-body: ~A~%" (-> obj upper-body))
  (format #t "~1Tsound-bank-knob: ~f~%" (-> obj sound-bank-knob))
  (format #t "~1Tsound-air-knob: ~f~%" (-> obj sound-air-knob))
  (format #t "~1Twind-sound-id: ~D~%" (-> obj wind-sound-id))
  (format #t "~1Twind-sound-pitch: ~f~%" (-> obj wind-sound-pitch))
  (format #t "~1Twind-sound-volume: ~f~%" (-> obj wind-sound-volume))
  (format #t "~1Tengine-sound-id: ~D~%" (-> obj engine-sound-id))
  (format #t "~1Tengine-sound-pitch: ~f~%" (-> obj engine-sound-pitch))
  (format #t "~1Tengine-sound-volume: ~f~%" (-> obj engine-sound-volume))
  (format #t "~1Tbank-sound-id: ~D~%" (-> obj bank-sound-id))
  (format #t "~1Tbank-sound-pitch: ~f~%" (-> obj bank-sound-pitch))
  (format #t "~1Tbank-sound-volume: ~f~%" (-> obj bank-sound-volume))
  (format #t "~1Tride-sound-id: ~D~%" (-> obj ride-sound-id))
  (format #t "~1Tspin-sound-id: ~D~%" (-> obj spin-sound-id))
  (format #t "~1Tspin-sound-volume: ~f~%" (-> obj spin-sound-volume))
  (format #t "~1Tspin-sound-pitch: ~f~%" (-> obj spin-sound-pitch))
  (format #t "~1Tup-vector[2] @ #x~X~%" (-> obj up-vector))
  (format #t "~1Tslow-transv: #<vector @ #x~X>~%" (-> obj slow-transv))
  (format #t "~1Tboard-time: ~D~%" (-> obj board-time))
  (format #t "~1Tboard-get-on-time: ~D~%" (-> obj board-get-on-time))
  (format #t "~1Tin-air-time: ~D~%" (-> obj in-air-time))
  (format #t "~1Tstick-lock: ~A~%" (-> obj stick-lock))
  (format #t "~1Tstick-off: ~A~%" (-> obj stick-off))
  (format #t "~1Tstance-info: #<ground-tween-info @ #x~X>~%" (-> obj stance-info))
  (format #t "~1Tmods-backup: ~A~%" (-> obj mods-backup))
  (format #t "~1Tattack-id: ~D~%" (-> obj attack-id))
  (format #t "~1Tlatch?: ~A~%" (-> obj latch?))
  (format #t "~1Tunstuck-time: ~D~%" (-> obj unstuck-time))
  (format #t "~1Tstuck-count: ~D~%" (-> obj stuck-count))
  (format #t "~1Tthrust-scale: ~f~%" (-> obj thrust-scale))
  (format #t "~1Tflip-time: ~D~%" (-> obj flip-time))
  (format #t "~1Ttransv-max: (meters ~m)~%" (-> obj transv-max))
  (format #t "~1Tturn-anim-tilt?: ~A~%" (-> obj turn-anim-tilt?))
  (format #t "~1Tturn-anim-mag: ~f~%" (-> obj turn-anim-mag))
  (format #t "~1Tturn-anim-targ: ~f~%" (-> obj turn-anim-targ))
  (format #t "~1Tturn-anim-frame: ~f~%" (-> obj turn-anim-frame))
  (format #t "~1Tturn-anim-vel: ~f~%" (-> obj turn-anim-vel))
  (format #t "~1Tturn-anim-duck: ~f~%" (-> obj turn-anim-duck))
  (format #t "~1Tturn-anim-duck-vel: ~f~%" (-> obj turn-anim-duck-vel))
  (format #t "~1Ttilt-anim-frame: ~`vector`P~%" (-> obj tilt-anim-frame))
  (format #t "~1Ttilt-anim-targ: ~`vector`P~%" (-> obj tilt-anim-target))
  (format #t "~1Tsmack-surface-time: ~D~%" (-> obj smack-surface-time))
  (format #t "~1Tsmack-speed: (meters ~m)~%" (-> obj smack-speed))
  (format #t "~1Tsmack-normal: ~`vector`P~%" (-> obj smack-normal))
  (format #t "~1Tglance-time: ~D~%" (-> obj glance-time))
  (format #t "~1Tglance-speed: (meters ~m)~%" (-> obj glance-speed))
  (format #t "~1Tglance-in-transv: ~`vector`P~%" (-> obj glance-in-transv))
  (format #t "~1Tglance-out-transv: ~`vector`P~%" (-> obj glance-out-transv))
  (format #t "~1Tglance-normal: ~`vector`P~%" (-> obj glance-normal))
  (format #t "~1Ton-flat-time: ~D~%" (-> obj on-flat-time))
  (format #t "~1Tjump-land-time: ~D~%" (-> obj jump-land-time))
  (format #t "~1Tslip-factor: ~f~%" (-> obj slip-factor))
  (format #t "~1Tground-on-dir: ~`vector`P~%" (-> obj ground-on-dir))
  (format #t "~1Tride-time: ~D~%" (-> obj ride-time))
  (format #t "~1Tride-start-time: ~D~%" (-> obj ride-start-time))
  (format #t "~1Tride-button-time: ~D~%" (-> obj ride-button-time))
  (format #t "~1Tride-lean-targ: ~f~%" (-> obj ride-lean-targ))
  (format #t "~1Tride-lean: ~f~%" (-> obj ride-lean))
  (format #t "~1Tride-leanv: ~f~%" (-> obj ride-leanv))
  (format #t "~1Tride-lean-mag: ~f~%" (-> obj ride-lean-mag))
  (format #t "~1Tride-tilt-targ: ~f~%" (-> obj ride-tilt-targ))
  (format #t "~1Tride-tilt: ~f~%" (-> obj ride-tilt))
  (format #t "~1Tride-tiltv: ~f~%" (-> obj ride-tiltv))
  (format #t "~1Tride-tilt-mag: ~f~%" (-> obj ride-tilt-mag))
  (format #t "~1Tride-lock: ~A~%" (-> obj ride-lock))
  (format #t "~1Tride-lock-on: ~A~%" (-> obj ride-lock-on))
  (format #t "~1Tride-speed: (meters ~m)~%" (-> obj ride-speed))
  (format #t "~1Tride-mode: ~D~%" (-> obj ride-mode))
  (format #t "~1Tride-rot: (deg ~r)~%" (-> obj ride-rot))
  (format #t "~1Tride-rot-old: (deg ~r)~%" (-> obj ride-rot-old))
  (format #t "~1Tride-rot-abs[2] @ #x~X~%" (-> obj ride-rot-abs))
  (dotimes (s5-0 2)
    (format #t "~T  [~D]~1Tride-rot-abs: (deg ~r)~%" s5-0 (-> obj ride-rot-abs s5-0))
    )
  (format #t "~1Tride-rotv-abs: (deg ~r)~%" (-> obj ride-rtv-abs))
  (format #t "~1Tride-touch-segment[2] @ #x~X~%" (-> obj ride-touch-segment))
  (dotimes (s5-1 2)
    (format #t "~T  [~D]~1Tride-touch-segment: ~`vector`P~%" s5-1 (-> obj ride-touch-segment s5-1))
    )
  (format #t "~1Tride-dir: ~`vector`P~%" (-> obj ride-dir))
  (format #t "~1Tride-vertex-length: ~D~%" (-> obj ride-vertex-length))
  (format #t "~1Tride-vertex-length-old: ~D~%" (-> obj ride-vertex-length-old))
  (format #t "~1Tride-vertex-base: ~D~%" (-> obj ride-vertex-base))
  (format #t "~1Tride-vertex-base2: ~D~%" (-> obj ride-vertex-base2))
  (format #t "~1Tride-vertex-index: ~f~%" (-> obj ride-vertex-index))
  (format #t "~1Tride-vertex-index2: ~f~%" (-> obj ride-vertex-index2))
  (format #t "~1Tride-vertex-index-old: ~f~%" (-> obj ride-vertex-index-old))
  (format #t "~1Tride-vertex[3] @ #x~X~%" (-> obj ride-vertex))
  (dotimes (s5-2 3)
    (format #t "~T  [~D]~1Tride-vertex: ~`vector`P~%" s5-2 (-> obj ride-vertex s5-2))
    )
  (format #t "~1Tride-segment: ~`vector`P~%" (-> obj ride-segment))
  (format #t "~1Tride-dir-lean: ~`vector`P~%" (-> obj ride-dir-lean))
  (format #t "~1Tride-pad-vector[1] @ #x~X~%" (-> obj ride-pad-vector))
  (format #t "~1Tride-vertex-old[3] @ #x~X~%" (-> obj ride-vertex-old))
  (dotimes (s5-3 3)
    (format #t "~T  [~D]~1Tride-vertex-old: ~`vector`P~%" s5-3 (-> obj ride-vertex-old s5-3))
    )
  (format #t "~1Tride-segment-old: ~`vector`P~%" (-> obj ride-segment-old))
  (format #t "~1Tride-vertex-trail[128] @ #x~X~%" (-> obj ride-vertex-trail))
  (dotimes (s5-4 128)
    (format #t "~T  [~D]~1Tride-vertex-trail: ~`vector`P~%" s5-4 (-> obj ride-vertex-trail s5-4))
    )
  (format #t "~1Thalfpipe-side-time: ~D~%" (-> obj halfpipe-side-time))
  (format #t "~1Thalfpipe-jump-time: ~D~%" (-> obj halfpipe-jump-time))
  (format #t "~1Thalfpipe-lip-time: ~D~%" (-> obj halfpipe-lip-time))
  (format #t "~1Thalfpipe-time: ~D~%" (-> obj halfpipe-time))
  (format #t "~1Thalfpipe-gspot-time: ~D~%" (-> obj halfpipe-gspot-time))
  (format #t "~1Thalfpipe-lip-event: ~A~%" (-> obj halfpipe-lip-event))
  (format #t "~1Tspin-check-time: ~D~%" (-> obj spin-check-time))
  (format #t "~1Tspin-time: ~D~%" (-> obj spin-time))
  (format #t "~1Tspin-start-time: ~D~%" (-> obj spin-start-time))
  (format #t "~1Tspin-start-dir: ~`vector`P~%" (-> obj spin-start-dir))
  (format #t "~1Tspin-control: ~f~%" (-> obj spin-control))
  (format #t "~1Tspin-ground-start-time: ~D~%" (-> obj spin-ground-start-time))
  (format #t "~1Tspin-ground-time: ~D~%" (-> obj spin-ground-time))
  (format #t "~1Tspin-ground-press-time: ~D~%" (-> obj spin-ground-press-time))
  (format #t "~1Tflip-control: ~f~%" (-> obj flip-control))
  (format #t "~1Tflip-count: ~D~%" (-> obj flip-count))
  (format #t "~1Ttrickx-count: ~D~%" (-> obj trickx-count))
  (format #t "~1Trotyv-max: (deg ~r)~%" (-> obj trotyv-max))
  (format #t "~1Trotyv: (deg ~r)~%" (-> obj trotyv))
  (format #t "~1Troty: (deg ~r)~%" (-> obj troty))
  (format #t "~1Troty-cum: (deg ~r)~%" (&-> obj troty-cum))
  (format #t "~1Tupper-body-rotyv-max: (deg ~r)~%" (-> obj upper-body-rotyv-max))
  (format #t "~1Tupper-body-rotyv: (deg ~r)~%" (-> obj upper-body-rotyv))
  (format #t "~1Tupper-body-roty: (deg ~r)~%" (-> obj upper-body-roty))
  (format #t "~1Tcushion-base: (meters ~m)~%" (-> obj cushion-base))
  (format #t "~1Tcushion-offset: (meters ~m)~%" (-> obj cushion-offset))
  (format #t "~1Tshock-offset: (meters ~m)~%" (-> obj shock-offset))
  (format #t "~1Tshock-offsetv: (meters ~m)~%" (-> obj shock-offsetv))
  (format #t "~1Tshock-rotx: (meters ~m)~%" (-> obj shock-rotx))
  (format #t "~1Ttrick-count: ~D~%" (-> obj trick-count))
  (label cfg-19)
  obj
  )

;; definition of type target-board-bank
(deftype target-board-bank (basic)
  ((jump-height-min        meters   :offset-assert   4)
   (jump-height-max        meters   :offset-assert   8)
   (duck-jump-height-min   meters   :offset-assert  12)
   (duck-jump-height-max   meters   :offset-assert  16)
   (turn-frames            float    :offset-assert  20)
   (wall-kick-window       seconds  :offset-assert  24)
   (cushion                meters   :offset-assert  32)
   (trickx-jump-height-min meters   :offset-assert  36)
   (trickx-jump-height-max meters   :offset-assert  40)
   (tricky-jump-height-min meters   :offset-assert  44)
   (tricky-jump-height-max meters   :offset-assert  48)
   )
  :method-count-assert 9
  :size-assert         #x34
  :flag-assert         #x900000034
  )

;; definition for method 3 of type target-board-bank
(defmethod inspect target-board-bank ((obj target-board-bank))
  (when (not obj)
    (set! obj obj)
    (goto cfg-4)
    )
  (format #t "[~8x] ~A~%" obj (-> obj type))
  (format #t "~1Tjump-height-min: (meters ~m)~%" (-> obj jump-height-min))
  (format #t "~1Tjump-height-max: (meters ~m)~%" (-> obj jump-height-max))
  (format #t "~1Tduck-jump-height-min: (meters ~m)~%" (-> obj duck-jump-height-min))
  (format #t "~1Tduck-jump-height-max: (meters ~m)~%" (-> obj duck-jump-height-max))
  (format #t "~1Tturn-frames: ~f~%" (-> obj turn-frames))
  (format #t "~1Twall-kick-window: (seconds ~e)~%" (-> obj wall-kick-window))
  (format #t "~1Tcushion: (meters ~m)~%" (-> obj cushion))
  (format #t "~1Ttrickx-jump-height-min: (meters ~m)~%" (-> obj trickx-jump-height-min))
  (format #t "~1Ttrickx-jump-height-max: (meters ~m)~%" (-> obj trickx-jump-height-max))
  (format #t "~1Ttricky-jump-height-min: (meters ~m)~%" (-> obj tricky-jump-height-min))
  (format #t "~1Ttricky-jump-height-max: (meters ~m)~%" (-> obj tricky-jump-height-max))
  (label cfg-4)
  obj
  )

;; definition for symbol *TARGET_BOARD-bank*, type target-board-bank
(define *TARGET_BOARD-bank* (new 'static 'target-board-bank
                              :jump-height-min (meters 1.01)
                              :jump-height-max (meters 3.5)
                              :duck-jump-height-min (meters 2.5)
                              :duck-jump-height-max (meters 5)
                              :turn-frames 10.0
                              :wall-kick-window (seconds 0.05)
                              :cushion (meters 1)
                              :trickx-jump-height-min (meters 0.9)
                              :trickx-jump-height-max (meters 1.2)
                              :tricky-jump-height-min (meters 0.9)
                              :tricky-jump-height-max (meters 1.2)
                              )
        )

;; definition for function want-to-board?
;; INFO: Used lq/sq
(defbehavior want-to-board? target ()
  (and (logtest? (-> self game features) (game-feature board))
       (or (and (cpad-pressed? (-> self control unknown-cpad-info00 number) r2)
                (or (!= *cheat-mode* 'debug)
                    (zero? (logand (-> *cpad-list* cpads (-> self control unknown-cpad-info00 number) button0-abs 0) (pad-buttons l2))
                           )
                    )
                (not *pause-lock*)
                (>= (- (-> self clock frame-counter) (-> self control unknown-time-frame01)) (seconds 0.1))
                (>= (the-as int (-> self control unknown-dword00)) (the-as int (-> self control unknown-dword01)))
                )
           (-> self board latch?)
           )
       (zero? (logand (focus-status fs1 fs6 fs7 fs8 fs12 fs13 fs18 fs20 fs21 fs22) (-> self focus-status)))
       (or (zero? (-> self board)) (>= (- (-> self clock frame-counter) (-> self board board-time)) (seconds 0.5)))
       (zero? (logand (state-flags sf17) (-> self state-flags)))
       (< (-> self board board-time) (-> self control unknown-time-frame00))
       (zero? (logand (surface-flag no-board) (-> self control unknown-surface00 flags)))
       (or (zero? (logand (-> self control unknown-surface00 flags) (surface-flag duck)))
           (begin self (can-exit-duck?))
           )
       (not (and (logtest? (-> self water flags) (water-flags under-water))
                 (zero? (logand (-> self water flags) (water-flags swim-ground)))
                 )
            )
       (not *artist-fix-visible*)
       (let ((gp-0 (new 'stack-no-clear 'collide-query)))
         (let ((s5-0 (new 'stack-no-clear 'inline-array 'sphere 3)))
           (dotimes (s4-0 3)
             ((method-of-type sphere new) (the-as symbol (-> s5-0 s4-0)) sphere)
             )
           (let ((v1-51 (new 'stack-no-clear 'vector)))
             (set! (-> v1-51 quad) (-> self control trans quad))
             (if (logtest? (-> self focus-status) (focus-status fs10))
                 (set! (-> v1-51 y) (-> self water height))
                 )
             (set! (-> s5-0 0 quad) (-> v1-51 quad))
             (set! (-> s5-0 0 y) (+ 8192.0 (-> s5-0 0 y)))
             (set! (-> s5-0 0 w) 2867.2)
             (set! (-> s5-0 1 quad) (-> v1-51 quad))
             (set! (-> s5-0 1 y) (+ 12288.0 (-> s5-0 1 y)))
             (set! (-> s5-0 1 w) 2867.2)
             (set! (-> s5-0 2 quad) (-> v1-51 quad))
             )
           (set! (-> s5-0 2 y) (+ 16384.0 (-> s5-0 2 y)))
           (set! (-> s5-0 2 w) 2867.2)
           (let ((v1-55 gp-0))
             (set! (-> v1-55 spheres) s5-0)
             (set! (-> v1-55 num-spheres) (the-as uint 3))
             (set! (-> v1-55 collide-with)
                   (the-as collide-spec (logand -16561 (-> self control root-prim prim-core collide-with)))
                   )
             (set! (-> v1-55 ignore-process0) #f)
             (set! (-> v1-55 ignore-process1) #f)
             (set! (-> v1-55 ignore-pat) (new 'static 'pat-surface :noentity #x1 :nojak #x1 :probe #x1 :noendlessfall #x1))
             (set! (-> v1-55 solid-only) #t)
             (set! (-> v1-55 action-mask) (the-as uint 1))
             )
           )
         (and (if (fill-and-probe-using-spheres *collide-cache* gp-0)
                  #f
                  #t
                  )
              (begin
                (set! (-> self board latch?) #t)
                (>= (- (-> self clock frame-counter) (-> self gun gun-time)) (seconds 0.4))
                )
              )
         )
       )
  )

;; failed to figure out what this is:
(let ((a0-6 (new 'static 'skeleton-group
              :name "skel-board"
              :extra #f
              :info #f
              :art-group-name "board"
              :bounds (new 'static 'vector :w 14336.0)
              :version #x7
              :shadow 2
              :sort 1
              :origin-joint-index 3
              )
            )
      )
  (set! (-> a0-6 jgeo) 0)
  (set! (-> a0-6 janim) 5)
  (set! (-> a0-6 mgeo 0) 1)
  (set! (-> a0-6 lod-dist 0) 4095996000.0)
  (add-to-loading-level a0-6)
  )

;; definition for symbol *board-shadow-control*, type shadow-control
(define *board-shadow-control*
  (new 'static 'shadow-control :settings (new 'static 'shadow-settings
                                           :center (new 'static 'vector :w (the-as float #xa))
                                           :shadow-dir (new 'static 'vector :y -1.0 :w 614400.0)
                                           :bot-plane (new 'static 'plane :y 1.0 :w 81920.0)
                                           :top-plane (new 'static 'plane :y 1.0 :w 2048.0)
                                           )
                               )
  )




