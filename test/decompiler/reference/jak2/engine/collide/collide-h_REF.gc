;;-*-Lisp-*-
(in-package goal)

;; definition of type collide-query
(deftype collide-query (structure)
  ((best-other-tri   collide-tri-result    :inline :offset-assert   0)
   (best-my-tri      collide-tri-result    :inline :offset          0)
   (ignore-processes process               2       :offset-assert  88)
   (ignore-process0  process                       :offset         88)
   (ignore-process1  process                       :offset         92)
   (ignore-pat       pat-surface                   :offset-assert  96)
   (collide-with     collide-spec                  :offset-assert 100)
   (overlay-params   uint32                3       :offset        112)
   (bbox             bounding-box          :inline :offset-assert 128)
   (bbox4w           bounding-box4w        :inline :offset-assert 160)
   (bsphere          sphere                :inline :offset-assert 192)
   (start-pos        vector                :inline :offset-assert 208)
   (move-dist        vector                :inline :offset-assert 224)
   (rlength          vector                :inline :offset-assert 240)
   (exit-planes      plane                 2       :offset-assert 256)
   (radius           float                         :offset        268)
   (inv-mat          matrix                :inline :offset        288)
   (spheres          (inline-array sphere)         :offset        112)
   (num-spheres      uint32                        :offset        116)
   (solid-only       symbol                        :offset        120)
   (best-dist        float                         :offset        112)
   (best-other-prim  basic                         :offset        116)
   (best-my-prim     basic                         :offset        120)
   (move-vec         vector                :inline :offset        224)
   (best-u           float                         :offset        112)
   (action-mask      uint32                        :offset-assert 352)
   (local-box4w      bounding-box4w        :inline :offset-assert 368)
   (search-box       bounding-box4w        :inline :offset-assert 400)
   (search-vector    vector4w              :inline :offset-assert 432)
   (instance-mat     matrix                :inline :offset-assert 448)
   (instance-ptr     basic                         :offset-assert 512)
   (x-addr           uint32                        :offset-assert 516)
   (x-step           uint32                        :offset-assert 520)
   (y-addr           uint32                        :offset-assert 524)
   (y-step           uint32                        :offset-assert 528)
   (z-addr           uint32                        :offset-assert 532)
   (z-step           uint32                        :offset-assert 536)
   )
  :method-count-assert 9
  :size-assert         #x21c
  :flag-assert         #x90000021c
  )

;; definition for method 3 of type collide-query
(defmethod inspect collide-query ((obj collide-query))
  (when (not obj)
    (set! obj obj)
    (goto cfg-4)
    )
  (format #t "[~8x] ~A~%" obj 'collide-query)
  (format #t "~1Tbest-other-tri: #<collide-tri-result @ #x~X>~%" (-> obj best-other-tri))
  (format #t "~1Tbest-my-tri: #<collide-tri-result @ #x~X>~%" (-> obj best-other-tri))
  (format #t "~1Tignore-processes[2] @ #x~X~%" (-> obj ignore-processes))
  (format #t "~1Tignore-process0: ~A~%" (-> obj ignore-process0))
  (format #t "~1Tignore-process1: ~A~%" (-> obj ignore-process1))
  (format #t "~1Tignore-pat: ~D~%" (-> obj ignore-pat))
  (format #t "~1Tcollide-with: ~D~%" (-> obj collide-with))
  (format #t "~1Toverlay-params[3] @ #x~X~%" (&-> obj spheres))
  (format #t "~1Tbbox: #<bounding-box @ #x~X>~%" (-> obj bbox))
  (format #t "~1Tbbox4w: #<bounding-box4w @ #x~X>~%" (-> obj bbox4w))
  (format #t "~1Tbsphere: #<sphere @ #x~X>~%" (-> obj bsphere))
  (format #t "~1Tstart-pos: #<vector @ #x~X>~%" (-> obj start-pos))
  (format #t "~1Tmove-dist: #<vector @ #x~X>~%" (-> obj move-dist))
  (format #t "~1Trlength: #<vector @ #x~X>~%" (-> obj rlength))
  (format #t "~1Texit-planes[2] @ #x~X~%" (-> obj exit-planes))
  (format #t "~1Tradius: ~f~%" (-> obj radius))
  (format #t "~1Tinv-mat: #<matrix @ #x~X>~%" (-> obj inv-mat))
  (format #t "~1Tspheres: #x~X~%" (-> obj spheres))
  (format #t "~1Tnum-spheres: ~D~%" (-> obj num-spheres))
  (format #t "~1Tsolid-only: ~A~%" (-> obj solid-only))
  (format #t "~1Tbest-dist: ~f~%" (the-as float (-> obj spheres)))
  (format #t "~1Tbest-other-prim: ~A~%" (-> obj num-spheres))
  (format #t "~1Tbest-my-prim: ~A~%" (-> obj solid-only))
  (format #t "~1Tmove-vec: #<vector @ #x~X>~%" (-> obj move-dist))
  (format #t "~1Tbest-u: ~f~%" (the-as float (-> obj spheres)))
  (format #t "~1Taction-mask: ~D~%" (-> obj action-mask))
  (format #t "~1Tlocal-box4w: #<bounding-box4w @ #x~X>~%" (-> obj local-box4w))
  (format #t "~1Tsearch-box: #<bounding-box4w @ #x~X>~%" (-> obj search-box))
  (format #t "~1Tsearch-vector: #<vector4w @ #x~X>~%" (-> obj search-vector))
  (format #t "~1Tinstance-mat: #<matrix @ #x~X>~%" (-> obj instance-mat))
  (format #t "~1Tinstance-ptr: ~A~%" (-> obj instance-ptr))
  (format #t "~1Tx-addr: ~D~%" (-> obj x-addr))
  (format #t "~1Tx-step: ~D~%" (-> obj x-step))
  (format #t "~1Ty-addr: ~D~%" (-> obj y-addr))
  (format #t "~1Ty-step: ~D~%" (-> obj y-step))
  (format #t "~1Tz-addr: ~D~%" (-> obj z-addr))
  (format #t "~1Tz-step: ~D~%" (-> obj z-step))
  (label cfg-4)
  obj
  )

;; definition for symbol *collide-test-flag*, type symbol
(define *collide-test-flag* #f)

;; failed to figure out what this is:
0
