;;-*-Lisp-*-
(in-package goal)

;; definition of type vis-gif-tag
(deftype vis-gif-tag (structure)
  ((fog0  uint32  :offset-assert   0)
   (strip uint32  :offset-assert   4)
   (regs  uint32  :offset-assert   8)
   (fan   uint32  :offset-assert  12)
   )
  :method-count-assert 9
  :size-assert         #x10
  :flag-assert         #x900000010
  )

;; definition for method 3 of type vis-gif-tag
(defmethod inspect vis-gif-tag ((this vis-gif-tag))
  (when (not this)
    (set! this this)
    (goto cfg-4)
    )
  (format #t "[~8x] ~A~%" this 'vis-gif-tag)
  (format #t "~1Tfog0: ~D~%" (-> this fog0))
  (format #t "~1Tstrip: ~D~%" (-> this strip))
  (format #t "~1Tregs: ~D~%" (-> this regs))
  (format #t "~1Tfan: ~D~%" (-> this fan))
  (label cfg-4)
  this
  )

;; definition of type cull-info
(deftype cull-info (structure)
  ((x-fact      float  :offset-assert   0)
   (y-fact      float  :offset-assert   4)
   (z-fact      float  :offset-assert   8)
   (cam-radius  float  :offset-assert  12)
   (cam-x       float  :offset-assert  16)
   (cam-y       float  :offset-assert  20)
   (xz-dir-ax   float  :offset-assert  24)
   (xz-dir-az   float  :offset-assert  28)
   (xz-dir-bx   float  :offset-assert  32)
   (xz-dir-bz   float  :offset-assert  36)
   (xz-cross-ab float  :offset-assert  40)
   (yz-dir-ay   float  :offset-assert  44)
   (yz-dir-az   float  :offset-assert  48)
   (yz-dir-by   float  :offset-assert  52)
   (yz-dir-bz   float  :offset-assert  56)
   (yz-cross-ab float  :offset-assert  60)
   )
  :allow-misaligned
  :method-count-assert 9
  :size-assert         #x40
  :flag-assert         #x900000040
  )

;; definition for method 3 of type cull-info
(defmethod inspect cull-info ((this cull-info))
  (when (not this)
    (set! this this)
    (goto cfg-4)
    )
  (format #t "[~8x] ~A~%" this 'cull-info)
  (format #t "~1Tx-fact: ~f~%" (-> this x-fact))
  (format #t "~1Ty-fact: ~f~%" (-> this y-fact))
  (format #t "~1Tz-fact: ~f~%" (-> this z-fact))
  (format #t "~1Tcam-radius: ~f~%" (-> this cam-radius))
  (format #t "~1Tcam-x: ~f~%" (-> this cam-x))
  (format #t "~1Tcam-y: ~f~%" (-> this cam-y))
  (format #t "~1Txz-dir-ax: ~f~%" (-> this xz-dir-ax))
  (format #t "~1Txz-dir-az: ~f~%" (-> this xz-dir-az))
  (format #t "~1Txz-dir-bx: ~f~%" (-> this xz-dir-bx))
  (format #t "~1Txz-dir-bz: ~f~%" (-> this xz-dir-bz))
  (format #t "~1Txz-cross-ab: ~f~%" (-> this xz-cross-ab))
  (format #t "~1Tyz-dir-ay: ~f~%" (-> this yz-dir-ay))
  (format #t "~1Tyz-dir-az: ~f~%" (-> this yz-dir-az))
  (format #t "~1Tyz-dir-by: ~f~%" (-> this yz-dir-by))
  (format #t "~1Tyz-dir-bz: ~f~%" (-> this yz-dir-bz))
  (format #t "~1Tyz-cross-ab: ~f~%" (-> this yz-cross-ab))
  (label cfg-4)
  this
  )

;; definition of type math-camera
(deftype math-camera (basic)
  ((d                          meters                :offset-assert   4)
   (f                          meters                :offset-assert   8)
   (fov                        degrees               :offset-assert  12)
   (x-ratio                    float                 :offset-assert  16)
   (y-ratio                    float                 :offset-assert  20)
   (x-pix                      float                 :offset-assert  24)
   (x-clip                     float                 :offset-assert  28)
   (x-clip-ratio-in            float                 :offset-assert  32)
   (x-clip-ratio-over          float                 :offset-assert  36)
   (y-pix                      float                 :offset-assert  40)
   (y-clip                     float                 :offset-assert  44)
   (y-clip-ratio-in            float                 :offset-assert  48)
   (y-clip-ratio-over          float                 :offset-assert  52)
   (cull-info                  cull-info   :inline   :offset-assert  56)
   (fog-start                  meters                :offset-assert 120)
   (fog-end                    meters                :offset-assert 124)
   (fog-max                    float                 :offset-assert 128)
   (fog-min                    float                 :offset-assert 132)
   (reset                      int32                 :offset-assert 136)
   (smooth-step                float                 :offset-assert 140)
   (smooth-t                   float                 :offset-assert 144)
   (perspective                matrix      :inline   :offset-assert 160)
   (isometric                  matrix      :inline   :offset-assert 224)
   (sprite-2d                  matrix      :inline   :offset-assert 288)
   (sprite-2d-hvdf             vector      :inline   :offset-assert 352)
   (camera-rot                 matrix      :inline   :offset-assert 368)
   (inv-camera-rot             matrix      :inline   :offset-assert 432)
   (inv-camera-rot-smooth      matrix      :inline   :offset-assert 496)
   (inv-camera-rot-smooth-from quaternion  :inline   :offset-assert 560)
   (camera-temp                matrix      :inline   :offset-assert 576)
   (prev-camera-temp           matrix      :inline   :offset-assert 640)
   (prev-inv-camera-rot        matrix      :inline   :offset-assert 704)
   (prev-trans                 vector      :inline   :offset-assert 768)
   (hmge-scale                 vector      :inline   :offset-assert 784)
   (inv-hmge-scale             vector      :inline   :offset-assert 800)
   (hvdf-off                   vector      :inline   :offset-assert 816)
   (guard                      vector      :inline   :offset-assert 832)
   (vis-gifs                   vis-gif-tag 4 :inline :offset-assert 848)
   (giftex                     uint128               :offset        848)
   (gifgr                      uint128               :offset        864)
   (giftex-trans               uint128               :offset        880)
   (gifgr-trans                uint128               :offset        896)
   (pfog0                      float                 :offset-assert 912)
   (pfog1                      float                 :offset-assert 916)
   (trans                      vector      :inline   :offset-assert 928)
   (plane                      plane       4 :inline :offset-assert 944)
   (guard-plane                plane       4 :inline :offset-assert 1008)
   (shrub-mat                  matrix      :inline   :offset-assert 1072)
   (quat-other                 quaternion  :inline   :offset-assert 1136)
   (trans-other                vector      :inline   :offset-assert 1152)
   (shrub-mat-other            matrix      :inline   :offset-assert 1168)
   (camera-temp-other          matrix      :inline   :offset-assert 1232)
   (camera-rot-other           matrix      :inline   :offset-assert 1296)
   (inv-camera-rot-other       matrix      :inline   :offset-assert 1360)
   (plane-other                plane       4 :inline :offset-assert 1424)
   (guard-plane-other          plane       4 :inline :offset-assert 1488)
   (mirror-trans               vector      :inline   :offset-assert 1552)
   (mirror-normal              vector      :inline   :offset-assert 1568)
   (fov-correction-factor      float                 :offset-assert 1584)
   )
  :method-count-assert 9
  :size-assert         #x634
  :flag-assert         #x900000634
  (:methods
    (new (symbol type) _type_ 0)
    )
  )

;; definition for method 3 of type math-camera
;; INFO: Used lq/sq
(defmethod inspect math-camera ((this math-camera))
  (when (not this)
    (set! this this)
    (goto cfg-4)
    )
  (format #t "[~8x] ~A~%" this (-> this type))
  (format #t "~1Td: (meters ~m)~%" (-> this d))
  (format #t "~1Tf: (meters ~m)~%" (-> this f))
  (format #t "~1Tfov: (deg ~r)~%" (-> this fov))
  (format #t "~1Tx-ratio: ~f~%" (-> this x-ratio))
  (format #t "~1Ty-ratio: ~f~%" (-> this y-ratio))
  (format #t "~1Tx-pix: ~f~%" (-> this x-pix))
  (format #t "~1Tx-clip: ~f~%" (-> this x-clip))
  (format #t "~1Tx-clip-ratio-in: ~f~%" (-> this x-clip-ratio-in))
  (format #t "~1Tx-clip-ratio-over: ~f~%" (-> this x-clip-ratio-over))
  (format #t "~1Ty-pix: ~f~%" (-> this y-pix))
  (format #t "~1Ty-clip: ~f~%" (-> this y-clip))
  (format #t "~1Ty-clip-ratio-in: ~f~%" (-> this y-clip-ratio-in))
  (format #t "~1Ty-clip-ratio-over: ~f~%" (-> this y-clip-ratio-over))
  (format #t "~1Tcull-info: #<cull-info @ #x~X>~%" (-> this cull-info))
  (format #t "~1Tfog-start: (meters ~m)~%" (-> this fog-start))
  (format #t "~1Tfog-end: (meters ~m)~%" (-> this fog-end))
  (format #t "~1Tfog-max: ~f~%" (-> this fog-max))
  (format #t "~1Tfog-min: ~f~%" (-> this fog-min))
  (format #t "~1Treset: ~D~%" (-> this reset))
  (format #t "~1Tsmooth-step: ~f~%" (-> this smooth-step))
  (format #t "~1Tsmooth-t: ~f~%" (-> this smooth-t))
  (format #t "~1Tperspective: #<matrix @ #x~X>~%" (-> this perspective))
  (format #t "~1Tisometric: #<matrix @ #x~X>~%" (-> this isometric))
  (format #t "~1Tsprite-2d: #<matrix @ #x~X>~%" (-> this sprite-2d))
  (format #t "~1Tsprite-2d-hvdf: #<vector @ #x~X>~%" (-> this sprite-2d-hvdf))
  (format #t "~1Tcamera-rot: #<matrix @ #x~X>~%" (-> this camera-rot))
  (format #t "~1Tinv-camera-rot: #<matrix @ #x~X>~%" (-> this inv-camera-rot))
  (format #t "~1Tinv-camera-rot-smooth: #<matrix @ #x~X>~%" (-> this inv-camera-rot-smooth))
  (format #t "~1Tinv-camera-rot-smooth-from: #<quaternion @ #x~X>~%" (-> this inv-camera-rot-smooth-from))
  (format #t "~1Tcamera-temp: #<matrix @ #x~X>~%" (-> this camera-temp))
  (format #t "~1Tprev-camera-temp: #<matrix @ #x~X>~%" (-> this prev-camera-temp))
  (format #t "~1Tprev-inv-camera-rot: #<matrix @ #x~X>~%" (-> this prev-inv-camera-rot))
  (format #t "~1Tprev-trans: ~`vector`P~%" (-> this prev-trans))
  (format #t "~1Thmge-scale: #<vector @ #x~X>~%" (-> this hmge-scale))
  (format #t "~1Tinv-hmge-scale: #<vector @ #x~X>~%" (-> this inv-hmge-scale))
  (format #t "~1Thvdf-off: #<vector @ #x~X>~%" (-> this hvdf-off))
  (format #t "~1Tguard: #<vector @ #x~X>~%" (-> this guard))
  (format #t "~1Tvis-gifs[4] @ #x~X~%" (-> this vis-gifs))
  (format #t "~1Tgiftex: ~D~%" (-> this giftex))
  (format #t "~1Tgifgr: ~D~%" (-> this gifgr))
  (format #t "~1Tgiftex-trans: ~D~%" (-> this giftex-trans))
  (format #t "~1Tgifgr-trans: ~D~%" (-> this gifgr-trans))
  (format #t "~1Tpfog0: ~f~%" (-> this pfog0))
  (format #t "~1Tpfog1: ~f~%" (-> this pfog1))
  (format #t "~1Ttrans: ~`vector`P~%" (-> this trans))
  (format #t "~1Tplane[4] @ #x~X~%" (-> this plane))
  (format #t "~1Tguard-plane[4] @ #x~X~%" (-> this guard-plane))
  (format #t "~1Tshrub-mat: #<matrix @ #x~X>~%" (-> this shrub-mat))
  (format #t "~1Tquat-other: #<quaternion @ #x~X>~%" (-> this quat-other))
  (format #t "~1Ttrans-other: #<vector @ #x~X>~%" (-> this trans-other))
  (format #t "~1Tshrub-mat-other: #<matrix @ #x~X>~%" (-> this shrub-mat-other))
  (format #t "~1Tcamera-temp-other: #<matrix @ #x~X>~%" (-> this camera-temp-other))
  (format #t "~1Tcamera-rot-other: #<matrix @ #x~X>~%" (-> this camera-rot-other))
  (format #t "~1Tinv-camera-rot-other: #<matrix @ #x~X>~%" (-> this inv-camera-rot-other))
  (format #t "~1Tplane-other[4] @ #x~X~%" (-> this plane-other))
  (format #t "~1Tguard-plane-other[4] @ #x~X~%" (-> this guard-plane-other))
  (format #t "~1Tmirror-trans: #<vector @ #x~X>~%" (-> this mirror-trans))
  (format #t "~1Tmirror-normal: #<vector @ #x~X>~%" (-> this mirror-normal))
  (format #t "~1Tfov-correction-factor: ~f~%" (-> this fov-correction-factor))
  (label cfg-4)
  this
  )

;; failed to figure out what this is:
0
