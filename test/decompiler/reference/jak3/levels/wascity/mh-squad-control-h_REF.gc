;;-*-Lisp-*-
(in-package goal)

;; definition of type mh-squad-member-settings
(deftype mh-squad-member-settings (structure)
  ((object-type               traffic-type)
   (max-target-count          int8)
   (min-target-count          int8)
   (target-count              int8)
   (toggle-shield-percentage  float)
   (heat-shield-percentage    float)
   )
  )

;; definition for method 3 of type mh-squad-member-settings
(defmethod inspect ((this mh-squad-member-settings))
  (when (not this)
    (set! this this)
    (goto cfg-4)
    )
  (format #t "[~8x] ~A~%" this 'mh-squad-member-settings)
  (format #t "~1Tobject-type: ~D~%" (-> this object-type))
  (format #t "~1Tmax-target-count: ~D~%" (-> this max-target-count))
  (format #t "~1Tmin-target-count: ~D~%" (-> this min-target-count))
  (format #t "~1Ttarget-count: ~D~%" (-> this target-count))
  (format #t "~1Ttoggle-shield-percentage: ~f~%" (-> this toggle-shield-percentage))
  (format #t "~1Theat-shield-percentage: ~f~%" (-> this heat-shield-percentage))
  (label cfg-4)
  this
  )

;; definition of type mh-squad-settings
(deftype mh-squad-settings (structure)
  ((mh-enemy-settings  mh-squad-member-settings  3 :inline)
   (grunt-settings     mh-squad-member-settings  :inline :overlay-at (-> mh-enemy-settings 0))
   (flitter-settings   mh-squad-member-settings  :inline :offset  16)
   (predator-settings  mh-squad-member-settings  :inline :offset  32)
   )
  )

;; definition for method 3 of type mh-squad-settings
(defmethod inspect ((this mh-squad-settings))
  (when (not this)
    (set! this this)
    (goto cfg-4)
    )
  (format #t "[~8x] ~A~%" this 'mh-squad-settings)
  (format #t "~1Tmh-enemy-settings[3] @ #x~X~%" (-> this grunt-settings))
  (format #t "~1Tgrunt-settings: #<mh-squad-member-settings @ #x~X>~%" (-> this grunt-settings))
  (format #t "~1Tflitter-settings: #<mh-squad-member-settings @ #x~X>~%" (-> this flitter-settings))
  (format #t "~1Tpredator-settings: #<mh-squad-member-settings @ #x~X>~%" (-> this predator-settings))
  (label cfg-4)
  this
  )

;; definition of type mh-squad-control
(deftype mh-squad-control (squad-control-city)
  ((active-squad-member-list          handle-array               :offset 828)
   (squad-settings                    mh-squad-settings  3 :inline)
   (squad-normal-settings             mh-squad-settings  :inline :overlay-at (-> squad-settings 0))
   (squad-war-settings                mh-squad-settings  :inline :overlay-at (-> squad-settings 1))
   (squad-mission-settings            mh-squad-settings  :inline :overlay-at (-> squad-settings 2))
   (alert-level                       int8)
   (map-traffic-object-type-to-squad  traffic-type       29)
   (current-target-attackers          int8)
   )
  (:methods
    (add-squad-member (_type_ process) int)
    (pop-squad-member-from-list (_type_ process) int)
    (copy-squad-settings-to-idx (_type_ (inline-array mh-squad-member-settings) int) none)
    (mh-squad-control-method-48 (_type_) symbol)
    )
  )

;; definition for method 3 of type mh-squad-control
(defmethod inspect ((this mh-squad-control))
  (when (not this)
    (set! this this)
    (goto cfg-4)
    )
  (format #t "[~8x] ~A~%" this (-> this type))
  (format #t "~1Tsync-clock: ~D~%" (-> this sync-clock))
  (format #t "~1Tsync-mask-8: ~D~%" (-> this sync-mask-8))
  (format #t "~1Tsync-mask-16: ~D~%" (-> this sync-mask-16))
  (format #t "~1Tsync-mask-32: ~D~%" (-> this sync-mask-32))
  (format #t "~1Talert-state: #<squad-alert-state @ #x~X>~%" (-> this alert-state))
  (format #t "~1Tprimary-target-history[16] @ #x~X~%" (-> this primary-target-history))
  (format #t "~1Ttraffic: ~A~%" (-> this traffic))
  (format #t "~1Tcity-mode: ~D~%" (-> this city-mode))
  (format #t "~1Ttraffic: ~A~%" (-> this traffic))
  (format #t "~1Tactive-squad-member-list: ~A~%" (-> this active-squad-member-list))
  (format #t "~1Tsquad-settings[3] @ #x~X~%" (-> this squad-settings))
  (format #t "~1Tsquad-normal-settings: #<mh-squad-settings @ #x~X>~%" (-> this squad-settings))
  (format #t "~1Tsquad-war-settings: #<mh-squad-settings @ #x~X>~%" (-> this squad-war-settings))
  (format #t "~1Tsquad-mission-settings: #<mh-squad-settings @ #x~X>~%" (-> this squad-mission-settings))
  (format #t "~1Talert-level: ~D~%" (-> this alert-level))
  (format #t "~1Tmap-traffic-object-type-to-squad[29] @ #x~X~%" (-> this map-traffic-object-type-to-squad))
  (format #t "~1Tcurrent-target-attackers: ~D~%" (-> this current-target-attackers))
  (label cfg-4)
  this
  )

;; definition for symbol *mh-squad-control*, type mh-squad-control
(define *mh-squad-control* (the-as mh-squad-control #f))
