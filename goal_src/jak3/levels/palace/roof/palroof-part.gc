;;-*-Lisp-*-
(in-package goal)

;; name: palroof-part.gc
;; name in dgo: palroof-part
;; dgos: IPF

;; DECOMP BEGINS

(defpartgroup group-palroof-window-large
  :id 1146
  :flags (sp4)
  :bounds (static-bspherem 0 0 0 8)
  :parts ((sp-item 4048 :fade-after (meters 300) :flags (sp6)) (sp-item 4049 :flags (is-3d sp6 sp7)))
  )

(defpart 4048
  :init-specs ((:texture (glow-soft level-default-sprite))
    (:num 1.0)
    (:scale-x (meters 16) (meters 0.1))
    (:rot-x (degrees 11.25))
    (:scale-y (meters 12) (meters 0.1))
    (:r 255.0)
    (:g 200.0)
    (:b 128.0)
    (:a 16.0 2.0)
    (:omega (degrees 6763.5))
    (:timer (seconds 0.017))
    (:flags (sp-cpuinfo-flag-2 sp-cpuinfo-flag-3 glow))
    (:userdata 2048.0)
    )
  )

(defpart 4049
  :init-specs ((:texture (common-white common))
    (:num 1.0)
    (:z (meters 0.05))
    (:scale-x (meters 4))
    (:rot-x (degrees 90))
    (:rot-y (degrees 0))
    (:rot-z (degrees 0))
    (:scale-y (meters 6))
    (:r 96.0 16.0)
    (:g :copy r)
    (:b :copy g)
    (:a 48.0)
    (:timer (seconds 0.017))
    (:flags (sp-cpuinfo-flag-2))
    (:rotate-y (degrees 0))
    )
  )

(defpartgroup group-palroof-window-small
  :id 1147
  :flags (sp4)
  :bounds (static-bspherem 0 0 0 8)
  :parts ((sp-item 4050 :fade-after (meters 200) :flags (sp6)) (sp-item 4051 :flags (is-3d sp6 sp7)))
  )

(defpart 4050
  :init-specs ((:texture (glow-soft level-default-sprite))
    (:num 1.0)
    (:scale-x (meters 8) (meters 0.1))
    (:rot-x (degrees 11.25))
    (:scale-y (meters 5) (meters 0.1))
    (:r 255.0)
    (:g 200.0)
    (:b 128.0)
    (:a 16.0 2.0)
    (:omega (degrees 4515.75))
    (:timer (seconds 0.017))
    (:flags (sp-cpuinfo-flag-2 sp-cpuinfo-flag-3 glow))
    (:userdata 2048.0)
    )
  )

(defpart 4051
  :init-specs ((:texture (common-white common))
    (:num 1.0)
    (:z (meters 0.05))
    (:scale-x (meters 1.5))
    (:rot-x (degrees 90))
    (:rot-y (degrees 0))
    (:rot-z (degrees 0))
    (:scale-y (meters 3.5))
    (:r 96.0 16.0)
    (:g :copy r)
    (:b :copy g)
    (:a 48.0)
    (:timer (seconds 0.017))
    (:flags (sp-cpuinfo-flag-2))
    (:rotate-y (degrees 0))
    )
  )

(defpartgroup group-palroof-runoff-high
  :id 1148
  :flags (sp4)
  :bounds (static-bspherem 0 -12 0 24)
  :parts ((sp-item 4052 :fade-after (meters 140) :falloff-to (meters 140) :flags (sp7))
    (sp-item 4053 :fade-after (meters 140) :falloff-to (meters 140) :flags (sp7))
    )
  )

(defpartgroup group-palroof-runoff-med
  :id 1149
  :flags (sp4)
  :bounds (static-bspherem 0 -12 0 24)
  :parts ((sp-item 4054 :fade-after (meters 100) :falloff-to (meters 100) :flags (sp7))
    (sp-item 4055 :fade-after (meters 100) :falloff-to (meters 100) :flags (sp7))
    )
  )

(defpartgroup group-palroof-runoff-low
  :id 1150
  :flags (sp4)
  :bounds (static-bspherem 0 -12 0 24)
  :parts ((sp-item 4056 :fade-after (meters 100) :falloff-to (meters 100) :flags (sp7))
    (sp-item 4057 :fade-after (meters 100) :falloff-to (meters 100) :flags (sp7))
    )
  )

(defpart 4058
  :init-specs ((:r 255.0) (:g 255.0) (:b 255.0) (:next-time (seconds 0.017)) (:next-launcher 4059))
  )

(defpart 4059
  :init-specs ((:r 32.0 32.0) (:g 32.0 32.0) (:b 64.0 32.0) (:next-time (seconds 0) (seconds 1.497)) (:next-launcher 4058))
  )

(defpart 4060
  :init-specs ((:texture (lakedrop level-default-sprite))
    (:num 1.0)
    (:scale-x (meters 0.08) (meters 0.03))
    (:rot-x 4)
    (:scale-y :copy scale-x)
    (:r 32.0 32.0)
    (:g :copy r)
    (:b 64.0 32.0)
    (:a 64.0 64.0)
    (:omega (degrees 0.01575) (degrees 0.009))
    (:vel-y (meters 0.033333335) (meters 0.06666667))
    (:fade-a -0.21333334 -0.21333334)
    (:accel-y (meters -0.005) (meters -0.00066666666))
    (:friction 0.98)
    (:timer (seconds 0.5))
    (:flags (sp-cpuinfo-flag-2 sp-cpuinfo-flag-3 sp-cpuinfo-flag-14 launch-along-z))
    (:func 'sparticle-motion-blur)
    (:next-time (seconds 0) (seconds 0.33))
    (:next-launcher 41)
    (:conerot-x (degrees 0) (degrees 50.000004))
    (:conerot-y (degrees 0) (degrees 3600))
    (:rotate-x (degrees 0))
    (:rotate-y (degrees 0))
    )
  )

(defpart 4061
  :init-specs ((:texture (hotdot level-default-sprite))
    (:birth-func 'birth-func-omega-normal-orient)
    (:num 0.5)
    (:y (meters 0.2))
    (:scale-x (meters 0.75) (meters 0.25))
    (:scale-y :copy scale-x)
    (:r 32.0 32.0)
    (:g :copy r)
    (:b 64.0 32.0)
    (:a 64.0 32.0)
    (:omega (degrees 0))
    (:scalevel-x (meters 0.013333334) (meters 0.006666667))
    (:scalevel-y :copy scalevel-x)
    (:fade-a -1.2)
    (:timer (seconds 1))
    (:flags (sp-cpuinfo-flag-2 sp-cpuinfo-flag-3 sp-cpuinfo-flag-14))
    (:userdata :data (new 'static 'boxed-array :type int32 10 0 0 #x401800 #x403d00 #x400700 #x408200))
    (:func 'sparticle-texture-animate)
    )
  )

(defun check-drop-level-palroof-drop-userdata ((arg0 sparticle-system) (arg1 sparticle-cpuinfo) (arg2 matrix))
  (when (< (-> arg2 rvec y) (-> arg1 user-float))
    (let ((s3-0 (new 'stack-no-clear 'vector)))
      (sp-kill-particle arg0 arg1)
      (set-vector! s3-0 (-> arg2 rvec x) (-> arg1 user-float) (-> arg2 rvec z) 1.0)
      (launch-particles (-> *part-id-table* 4060) s3-0)
      (launch-particles :system *sp-particle-system-3d* (-> *part-id-table* 4061) s3-0)
      )
    )
  (sparticle-motion-blur arg0 arg1 (the-as vector arg2))
  (none)
  )

(defpart 4052
  :init-specs ((:texture (lakedrop level-default-sprite))
    (:num 1.0)
    (:z (meters -0.5))
    (:scale-x (meters 0.1) (meters 0.1))
    (:rot-x 4)
    (:scale-y :copy scale-x)
    (:r 32.0 32.0)
    (:g 32.0 32.0)
    (:b 64.0 32.0)
    (:a 128.0)
    (:omega (degrees 0.0225))
    (:vel-z (meters 0.06666667) (meters 0.013333334))
    (:accel-y (meters -0.006666667) (meters 0.00033333333))
    (:friction 0.93 0.02)
    (:timer (seconds 1.5))
    (:flags (sp-cpuinfo-flag-2 sp-cpuinfo-flag-3 sp-cpuinfo-flag-13 launch-along-z))
    (:userdata 1712947.2)
    (:func 'check-drop-level-palroof-drop-userdata)
    (:next-time (seconds 0) (seconds 0.747))
    (:next-launcher 4058)
    (:launchrot-x (degrees -5) (degrees 10))
    (:launchrot-z (degrees -5) (degrees 10))
    (:rotate-x (degrees -90))
    )
  )

(defpart 4053
  :init-specs ((:texture (lakedrop level-default-sprite))
    (:num 0.0 0.5)
    (:z (meters -0.5))
    (:scale-x (meters 0.1) (meters 0.1))
    (:rot-x 4)
    (:scale-y :copy scale-x)
    (:r 32.0 32.0)
    (:g 32.0 32.0)
    (:b 64.0 32.0)
    (:a 128.0)
    (:omega (degrees 0.0225))
    (:vel-z (meters 0.06666667) (meters 0.013333334))
    (:accel-y (meters -0.006666667) (meters 0.00033333333))
    (:friction 0.93 0.02)
    (:timer (seconds 1.5))
    (:flags (sp-cpuinfo-flag-2 sp-cpuinfo-flag-3 sp-cpuinfo-flag-13 launch-along-z))
    (:userdata 1712947.2)
    (:func 'check-drop-level-palroof-drop-userdata)
    (:next-time (seconds 0) (seconds 0.747))
    (:next-launcher 4058)
    (:launchrot-x (degrees -30) (degrees 60))
    (:launchrot-z (degrees -30) (degrees 60))
    (:rotate-x (degrees -90))
    )
  )

(defpart 4054
  :init-specs ((:texture (lakedrop level-default-sprite))
    (:num 1.0)
    (:z (meters -0.5))
    (:scale-x (meters 0.1) (meters 0.1))
    (:rot-x 4)
    (:scale-y :copy scale-x)
    (:r 32.0 32.0)
    (:g 32.0 32.0)
    (:b 64.0 32.0)
    (:a 128.0)
    (:omega (degrees 0.0225))
    (:vel-z (meters 0.06666667) (meters 0.013333334))
    (:accel-y (meters -0.006666667) (meters 0.00033333333))
    (:friction 0.93 0.02)
    (:timer (seconds 1.5))
    (:flags (sp-cpuinfo-flag-2 sp-cpuinfo-flag-3 sp-cpuinfo-flag-13 launch-along-z))
    (:userdata 1698611.2)
    (:func 'check-drop-level-palroof-drop-userdata)
    (:next-time (seconds 0) (seconds 0.747))
    (:next-launcher 4058)
    (:launchrot-x (degrees -5) (degrees 10))
    (:launchrot-z (degrees -5) (degrees 10))
    (:rotate-x (degrees -90))
    )
  )

(defpart 4055
  :init-specs ((:texture (lakedrop level-default-sprite))
    (:num 0.0 0.5)
    (:z (meters -0.5))
    (:scale-x (meters 0.1) (meters 0.1))
    (:rot-x 4)
    (:scale-y :copy scale-x)
    (:r 32.0 32.0)
    (:g 32.0 32.0)
    (:b 64.0 32.0)
    (:a 128.0)
    (:omega (degrees 0.0225))
    (:vel-z (meters 0.06666667) (meters 0.013333334))
    (:accel-y (meters -0.006666667) (meters 0.00033333333))
    (:friction 0.93 0.02)
    (:timer (seconds 1.5))
    (:flags (sp-cpuinfo-flag-2 sp-cpuinfo-flag-3 sp-cpuinfo-flag-13 launch-along-z))
    (:userdata 1698611.2)
    (:func 'check-drop-level-palroof-drop-userdata)
    (:next-time (seconds 0) (seconds 0.747))
    (:next-launcher 4058)
    (:launchrot-x (degrees -30) (degrees 60))
    (:launchrot-z (degrees -30) (degrees 60))
    (:rotate-x (degrees -90))
    )
  )

(defpart 4056
  :init-specs ((:texture (lakedrop level-default-sprite))
    (:num 1.0)
    (:z (meters -0.5))
    (:scale-x (meters 0.1) (meters 0.1))
    (:rot-x 4)
    (:scale-y :copy scale-x)
    (:r 32.0 32.0)
    (:g 32.0 32.0)
    (:b 64.0 32.0)
    (:a 128.0)
    (:omega (degrees 0.0225))
    (:vel-z (meters 0.06666667) (meters 0.013333334))
    (:accel-y (meters -0.006666667) (meters 0.00033333333))
    (:friction 0.93 0.02)
    (:timer (seconds 1.5))
    (:flags (sp-cpuinfo-flag-2 sp-cpuinfo-flag-3 sp-cpuinfo-flag-13 launch-along-z))
    (:userdata 1671987.2)
    (:func 'check-drop-level-palroof-drop-userdata)
    (:next-time (seconds 0) (seconds 0.747))
    (:next-launcher 4058)
    (:launchrot-x (degrees -5) (degrees 10))
    (:launchrot-z (degrees -5) (degrees 10))
    (:rotate-x (degrees -90))
    )
  )

(defpart 4057
  :init-specs ((:texture (lakedrop level-default-sprite))
    (:num 0.0 0.5)
    (:z (meters -0.5))
    (:scale-x (meters 0.1) (meters 0.1))
    (:rot-x 4)
    (:scale-y :copy scale-x)
    (:r 32.0 32.0)
    (:g 32.0 32.0)
    (:b 64.0 32.0)
    (:a 128.0)
    (:omega (degrees 0.0225))
    (:vel-z (meters 0.06666667) (meters 0.013333334))
    (:accel-y (meters -0.006666667) (meters 0.00033333333))
    (:friction 0.93 0.02)
    (:timer (seconds 1.5))
    (:flags (sp-cpuinfo-flag-2 sp-cpuinfo-flag-3 sp-cpuinfo-flag-13 launch-along-z))
    (:userdata 1671987.2)
    (:func 'check-drop-level-palroof-drop-userdata)
    (:next-time (seconds 0) (seconds 0.747))
    (:next-launcher 4058)
    (:launchrot-x (degrees -30) (degrees 60))
    (:launchrot-z (degrees -30) (degrees 60))
    (:rotate-x (degrees -90))
    )
  )

(defpartgroup group-palroof-lightning-pole
  :id 1151
  :bounds (static-bspherem 0 -3.5 0 4)
  :parts ((sp-item 4062 :fade-after (meters 160) :flags (sp6) :period (seconds 0.1) :length (seconds 0.05))
    (sp-item 4063 :fade-after (meters 160) :flags (sp6))
    )
  )

(defpartgroup group-palroof-lightning-pole-off
  :id 1152
  :bounds (static-bspherem 0 -3.5 0 4)
  :parts ((sp-item 4062 :fade-after (meters 80) :flags (sp6) :period (seconds 2.667) :length (seconds 1)))
  )

(defpart 4063
  :init-specs ((:texture (glow-soft level-default-sprite))
    (:num 2.0)
    (:y (meters -1.2) 6 (meters -1))
    (:scale-x (meters 1.6) (meters 0.1))
    (:rot-x (degrees 1.125))
    (:scale-y (meters 3.6) (meters 0.1))
    (:r 0.0)
    (:g 128.0 64.0)
    (:b 255.0)
    (:a 32.0 4.0)
    (:omega (degrees 3615.75))
    (:timer (seconds 0.035))
    (:flags (sp-cpuinfo-flag-2 sp-cpuinfo-flag-3 glow))
    (:userdata 4096.0)
    (:rotate-y (degrees 0))
    )
  )

(defpart 4062
  :init-specs ((:texture (glow level-default-sprite))
    (:num 1.0)
    (:scale-x (meters 1.6) (meters 0.1))
    (:rot-x (degrees 1.125))
    (:scale-y :copy scale-x)
    (:r 255.0)
    (:g 0.0 64.0)
    (:b 0.0)
    (:a 32.0 4.0)
    (:omega (degrees 3615.75))
    (:timer (seconds 0.017))
    (:flags (sp-cpuinfo-flag-2 sp-cpuinfo-flag-3 glow))
    (:userdata 1024.0)
    (:rotate-y (degrees 0))
    )
  )
