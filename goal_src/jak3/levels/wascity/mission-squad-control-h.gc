;;-*-Lisp-*-
(in-package goal)

;; name: mission-squad-control-h.gc
;; name in dgo: mission-squad-control-h
;; dgos: DESRESC, WWD, CWI

;; +++city-attacker-info-flag
(defenum city-attacker-info-flag
  :type uint16
  :bitfield #t
  (cai0 0)
  (cai1 1)
  (cai2 2)
  (cai3 3)
  )
;; ---city-attacker-info-flag


;; +++city-hatred-info-flag
(defenum city-hatred-info-flag
  :type uint16
  :bitfield #t
  )
;; ---city-hatred-info-flag


;; DECOMP BEGINS

(deftype city-attacker-info (structure)
  ((proc                     handle)
   (enemy                    handle)
   (next-update-target-time  time-frame)
   (flags                    city-attacker-info-flag)
   (num-current-attackers    uint8)
   (max-num-attackers        uint8)
   (self-type                int16)
   (enemy-type               int16)
   (self-index               int16)
   (enemy-index              int16)
   (callback                 function)
   (hatred-map-callback      function)
   )
  (:methods
    (city-attacker-info-method-9 () none)
    (city-attacker-info-method-10 () none)
    )
  )


(deftype city-attacker-cache (structure)
  ((pos          vector)
   (proc         basic)
   (attackable?  symbol)
   )
  )


(deftype city-hatred-info (structure)
  ((hatred             float)
   (max-consider-dist  float)
   (hatred-dist        float)
   (dist-scale         float)
   (attacker-scale     float)
   (flags              city-hatred-info-flag)
   (index              uint8)
   (pad                uint8)
   )
  )


(deftype city-attacker-array (inline-array-class)
  ((data  city-attacker-info  :inline :dynamic)
   )
  )


(set! (-> city-attacker-array heap-base) (the-as uint 48))

(deftype city-hatred-array (inline-array-class)
  ((data  city-hatred-info  :inline :dynamic)
   )
  )


(set! (-> city-hatred-array heap-base) (the-as uint 24))

(deftype city-attacker-cache-array (inline-array-class)
  ((data  city-attacker-cache  :inline :dynamic)
   )
  )


(set! (-> city-attacker-cache-array heap-base) (the-as uint 12))

(deftype mission-squad-control (basic)
  ((attackers             city-attacker-array)
   (unused-list           basic)
   (hatred-vals           basic)
   (hatred-indices        basic)
   (attacker-cache        city-attacker-cache-array)
   (target-attacker       city-attacker-info)
   (max-num-object-types  int32)
   )
  (:methods
    (mission-squad-control-method-9 () none)
    (mission-squad-control-method-10 () none)
    (mission-squad-control-method-11 () none)
    (mission-squad-control-method-12 () none)
    (mission-squad-control-method-13 () none)
    (mission-squad-control-method-14 () none)
    (mission-squad-control-method-15 () none)
    (mission-squad-control-method-16 () none)
    (mission-squad-control-method-17 () none)
    (mission-squad-control-method-18 () none)
    (mission-squad-control-method-19 () none)
    (mission-squad-control-method-20 () none)
    (mission-squad-control-method-21 () none)
    (mission-squad-control-method-22 () none)
    (mission-squad-control-method-23 () none)
    )
  )
