;;-*-Lisp-*-
(in-package goal)

;; name: sparticle-launcher.gc
;; name in dgo: sparticle-launcher
;; dgos: GAME, ENGINE

;; TODO - for shadow
(define *part-id-table* (new 'global 'boxed-array sparticle-launcher 3584))
(define *part-group-id-table* (new 'global 'boxed-array sparticle-launch-group 1024))
(define *particle-300hz-timer* 0)

;; TODO - for particle related code
(define-extern sp-launch-particles-var (function sparticle-system sparticle-launcher vector symbol symbol float none))

(defmethod create-launch-control sparticle-launch-group ((obj sparticle-launch-group) (arg0 process))
  ;;(format 0 "creating launch control...~%")
  (let ((gp-0 (new #|'process TEMP|# 'global 'sparticle-launch-control (-> obj length))))
   (when (zero? gp-0)
    (go process-drawable-art-error "memory")
    (return (the-as sparticle-launch-control 0))
    )
   ;;(initialize gp-0 obj arg0)
   ;;(format 0 "created launch control!~%")
   gp-0
   )
  )
