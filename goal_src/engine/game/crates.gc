;;-*-Lisp-*-
(in-package goal)

;; name: crates.gc
;; name in dgo: crates
;; dgos: GAME, ENGINE

;; TODO - for swamp-obs
(deftype crate (process-drawable)
  ((smush               smush-control :inline :offset-assert 176)
   (base                vector        :inline :offset-assert 208)
   (look                basic                 :offset-assert 224)
   (defense             basic                 :offset-assert 228)
   (incomming-attack-id uint64                :offset-assert 232)
   (target              uint64                :offset-assert 240)
   (child-count         int32                 :offset-assert 248)
   (victory-anim        basic                 :offset-assert 252)
   )
  :method-count-assert 30
  :size-assert         #x100
  :heap-base           #x90
  :flag-assert         #x1e00900100
  ;; inherited inspect of process-drawable
  (:methods
    (wait ()  _type_ :state 20) ;; state
    (unknown-state00 () _type_ :state 21)
    (dummy-22 () none 22)
    (bounce-on ()  _type_ :state 23) ;; state
    (unknown-state01 () _type_ :state 24)
    (dummy-25 () none 25)
    (dummy-26 () none 26)
    (dummy-27 () none 27)
    (dummy-28 () none 28)
    (dummy-29 () none 29)
    )
  )

(deftype barrel (crate)
  ()
  :method-count-assert 30
  :heap-base           #x90
  :size-assert         #x100
  :flag-assert         #x1e00900100
  )
