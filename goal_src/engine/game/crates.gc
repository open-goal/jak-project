;;-*-Lisp-*-
(in-package goal)

;; name: crates.gc
;; name in dgo: crates
;; dgos: GAME, ENGINE

;; TODO - for swamp-obs
(deftype crate (process-drawable)
  ((root-override       collide-shape-moving :score 20 :offset 112)
   (smush               smush-control :inline :offset-assert 176)
   (base                vector        :inline :offset-assert 208)
   (look                symbol                :offset-assert 224)
   (defense             symbol                :offset-assert 228)
   (incomming-attack-id uint64                :offset-assert 232)
   (target              handle                :offset-assert 240)
   (child-count         int32                 :offset-assert 248)
   (victory-anim        spool-anim            :offset-assert 252)
   )
  :method-count-assert 30
  :size-assert         #x100
  :heap-base           #x90
  :flag-assert         #x1e00900100
  ;; inherited inspect of process-drawable
  (:methods
    (wait ()  _type_ :state 20) ;; state
    (die (symbol int) _type_ :state 21)
    (special-contents-die () _type_ :state 22)
    (bounce-on ()  _type_ :state 23) ;; state
    (notice-blue (handle) _type_ :state 24)
    (params-init (_type_ entity) none 25)
    (art-init (_type_) none 26)
    (params-set! (_type_ symbol symbol) none 27)
    (dummy-28 (_type_) none 28)
    (smush-update! (_type_) none 29)
    )
  )

(deftype barrel (crate)
  ()
  :method-count-assert 30
  :heap-base           #x90
  :size-assert         #x100
  :flag-assert         #x1e00900100
  )
