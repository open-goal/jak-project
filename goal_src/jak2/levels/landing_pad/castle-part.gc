;;-*-Lisp-*-
(in-package goal)

;; name: castle-part.gc
;; name in dgo: castle-part
;; dgos: CAS

;; DECOMP BEGINS

(deftype castle-part (part-spawner)
  ()
  :heap-base #x30
  :method-count-assert 16
  :size-assert         #xb0
  :flag-assert         #x10003000b0
  )


(defpartgroup group-castle-hanging-lights
  :id 1187
  :bounds (static-bspherem 0 0 0 5)
  :parts ((sp-item 5121 :fade-after (meters 120) :flags (bit6)))
  )

(defpart 5121
  :init-specs ((sp-tex spt-texture (new 'static 'texture-id :index #xbb :page #xc))
    (sp-flt spt-num 1.0)
    (sp-rnd-flt spt-scale-x (meters 4.5) (meters 0.1) 1.0)
    (sp-flt spt-rot-x 409.6)
    (sp-flt spt-rot-z (degrees -17.0))
    (sp-copy-from-other spt-scale-y -4)
    (sp-flt spt-r 117.0)
    (sp-flt spt-g 80.0)
    (sp-flt spt-b 54.0)
    (sp-flt spt-a 32.0)
    (sp-flt spt-omega 494387.2)
    (sp-int spt-timer 5)
    (sp-cpuinfo-flags sp-cpuinfo-flag-2 sp-cpuinfo-flag-3 glow)
    (sp-flt spt-userdata 2048.0)
    )
  )

(defpart 5122
  :init-specs ((sp-tex spt-texture (new 'static 'texture-id :index #xbb :page #xc))
    (sp-flt spt-num 1.0)
    (sp-rnd-flt spt-scale-x (meters 4.5) (meters 0.1) 1.0)
    (sp-flt spt-rot-x 819.2)
    (sp-flt spt-rot-z (degrees -17.0))
    (sp-copy-from-other spt-scale-y -4)
    (sp-flt spt-r 128.0)
    (sp-flt spt-g 96.0)
    (sp-flt spt-b 62.0)
    (sp-flt spt-a 32.0)
    (sp-flt spt-omega 494387.2)
    (sp-int spt-timer 5)
    (sp-cpuinfo-flags sp-cpuinfo-flag-2 sp-cpuinfo-flag-3 glow)
    (sp-flt spt-userdata 2048.0)
    )
  )

(defpartgroup group-castle-red-gauge
  :id 1188
  :flags (unk-4 unk-6)
  :bounds (static-bspherem 0 0 0 2)
  :rotate ((degrees 90) (degrees 0) (degrees 0))
  :parts ((sp-item 5123 :fade-after (meters 200) :flags (bit6 bit7)))
  )

(defpart 5123
  :init-specs ((sp-tex spt-texture (new 'static 'texture-id :index #xca :page #xc))
    (sp-flt spt-num 1.0)
    (sp-flt spt-y (meters -0.1))
    (sp-flt spt-scale-x (meters 3.5))
    (sp-flt spt-rot-x 409.6)
    (sp-flt spt-rot-z (degrees 0.0))
    (sp-flt spt-scale-y (meters 5))
    (sp-flt spt-r 255.0)
    (sp-rnd-flt spt-g 0.0 64.0 1.0)
    (sp-copy-from-other spt-b -1)
    (sp-rnd-flt spt-a 32.0 2.0 1.0)
    (sp-flt spt-omega 822067.2)
    (sp-int spt-timer 5)
    (sp-cpuinfo-flags sp-cpuinfo-flag-2 glow)
    (sp-flt spt-userdata 409.6)
    (sp-flt spt-rotate-y (degrees 0.0))
    )
  )

(defpartgroup group-castle-pipe-green-drip
  :id 1189
  :bounds (static-bspherem 0 0 0 6)
  :parts ((sp-item 5124 :fade-after (meters 140) :falloff-to (meters 140))
    (sp-item 5125 :fade-after (meters 140) :flags (is-3d))
    )
  )

(defpart 5124
  :init-specs ((sp-tex spt-texture (new 'static 'texture-id :index #x21 :page #xc))
    (sp-rnd-flt spt-num 0.0 0.1 1.0)
    (sp-int spt-rot-x 4)
    (sp-flt spt-r 128.0)
    (sp-flt spt-g 196.0)
    (sp-flt spt-b 0.0)
    (sp-flt spt-a 196.0)
    (sp-flt spt-scalevel-x (meters 0.00044444445))
    (sp-copy-from-other spt-scalevel-y -4)
    (sp-int spt-timer 900)
    (sp-cpuinfo-flags sp-cpuinfo-flag-2 sp-cpuinfo-flag-3 sp-cpuinfo-flag-12 use-global-acc)
    (sp-flt spt-userdata 114892.8)
    (sp-func spt-func 'check-drop-level-castle-drop-userdata)
    (sp-int-plain-rnd spt-next-time 225 224 1)
    (sp-launcher-by-id spt-next-launcher 5126)
    )
  )

(defpart 5126
  :init-specs ((sp-rnd-flt spt-accel-y -8.192 2.7306666 1.0)
    (sp-rnd-flt spt-friction 0.93 0.02 1.0)
    (sp-int-plain-rnd spt-next-time 0 224 1)
    (sp-launcher-by-id spt-next-launcher 5127)
    )
  )

(defpart 5127
  :init-specs ((sp-flt spt-r 255.0)
    (sp-flt spt-g 255.0)
    (sp-flt spt-b 255.0)
    (sp-int spt-next-time 5)
    (sp-launcher-by-id spt-next-launcher 5128)
    )
  )

(defpart 5128
  :init-specs ((sp-flt spt-r 128.0)
    (sp-flt spt-g 196.0)
    (sp-flt spt-b 0.0)
    (sp-int-plain-rnd spt-next-time 0 449 1)
    (sp-launcher-by-id spt-next-launcher 5127)
    )
  )

(defun check-drop-level-castle-drop-userdata ((arg0 sparticle-system) (arg1 sparticle-cpuinfo) (arg2 matrix))
  (when (< (-> arg2 vector 0 y) (-> arg1 user-float))
    (let ((s3-0 (new 'stack-no-clear 'vector)))
      (sp-kill-particle arg0 arg1)
      (set-vector! s3-0 (-> arg2 vector 0 x) (-> arg1 user-float) (-> arg2 vector 0 z) 1.0)
      (let ((t9-1 sp-launch-particles-var)
            (a0-3 *sp-particle-system-2d*)
            (a1-2 (-> *part-id-table* 5129))
            (a2-1 *launch-matrix*)
            )
        (set! (-> a2-1 trans quad) (-> s3-0 quad))
        (t9-1 a0-3 a1-2 a2-1 (the-as sparticle-launch-state #f) (the-as sparticle-launch-control #f) 1.0)
        )
      (let ((t9-2 sp-launch-particles-var)
            (a0-4 *sp-particle-system-3d*)
            (a1-3 (-> *part-id-table* 5130))
            (a2-2 *launch-matrix*)
            )
        (set! (-> a2-2 trans quad) (-> s3-0 quad))
        (t9-2 a0-4 a1-3 a2-2 (the-as sparticle-launch-state #f) (the-as sparticle-launch-control #f) 1.0)
        )
      (let ((t9-3 sp-launch-particles-var)
            (a0-5 *sp-particle-system-3d*)
            (a1-4 (-> *part-id-table* 5131))
            (a2-3 *launch-matrix*)
            )
        (set! (-> a2-3 trans quad) (-> s3-0 quad))
        (t9-3 a0-5 a1-4 a2-3 (the-as sparticle-launch-state #f) (the-as sparticle-launch-control #f) 1.0)
        )
      (let ((t9-4 sp-launch-particles-var)
            (a0-6 *sp-particle-system-3d*)
            (a1-5 (-> *part-id-table* 5132))
            (a2-4 *launch-matrix*)
            )
        (set! (-> a2-4 trans quad) (-> s3-0 quad))
        (t9-4 a0-6 a1-5 a2-4 (the-as sparticle-launch-state #f) (the-as sparticle-launch-control #f) 1.0)
        )
      )
    )
  (sparticle-motion-blur arg0 arg1 (the-as vector arg2))
  (none)
  )

(defpart 5129
  :init-specs ((sp-tex spt-texture (new 'static 'texture-id :index #x21 :page #xc))
    (sp-flt spt-num 1.0)
    (sp-rnd-flt spt-scale-x (meters 0.1) (meters 0.05) 1.0)
    (sp-int spt-rot-x 4)
    (sp-copy-from-other spt-scale-y -4)
    (sp-flt spt-r 128.0)
    (sp-flt spt-g 196.0)
    (sp-flt spt-b 0.0)
    (sp-rnd-flt spt-a 32.0 32.0 1.0)
    (sp-flt spt-omega 8.192)
    (sp-rnd-flt spt-vel-y (meters 0.013333334) (meters 0.01) 1.0)
    (sp-flt spt-fade-a -0.16)
    (sp-rnd-flt spt-accel-y -4.096 -0.68266666 1.0)
    (sp-flt spt-friction 0.97)
    (sp-int spt-timer 200)
    (sp-cpuinfo-flags sp-cpuinfo-flag-2 sp-cpuinfo-flag-3)
    (sp-func spt-func 'sparticle-motion-blur)
    (sp-int-plain-rnd spt-next-time 0 224 1)
    (sp-launcher-by-id spt-next-launcher 5127)
    (sp-rnd-flt spt-conerot-x (degrees 25.000002) (degrees 30.0) 1.0)
    (sp-rnd-flt spt-conerot-y (degrees 0.0) (degrees 360.0) 1.0)
    (sp-flt spt-rotate-y (degrees 180.0))
    )
  )

(defpart 5130
  :init-specs ((sp-tex spt-texture (new 'static 'texture-id :index #xc9 :page #xc))
    (sp-flt spt-num 1.0)
    (sp-rnd-flt spt-scale-x (meters 0.5) (meters 0.25) 1.0)
    (sp-copy-from-other spt-scale-y -4)
    (sp-flt spt-r 128.0)
    (sp-flt spt-g 196.0)
    (sp-flt spt-b 0.0)
    (sp-rnd-flt spt-a 64.0 32.0 1.0)
    (sp-flt spt-omega 0.0)
    (sp-rnd-flt spt-scalevel-x (meters 0.006666667) (meters 0.006666667) 1.0)
    (sp-copy-from-other spt-scalevel-y -4)
    (sp-flt spt-fade-a -1.2)
    (sp-int spt-timer 300)
    (sp-cpuinfo-flags sp-cpuinfo-flag-2 sp-cpuinfo-flag-3 sp-cpuinfo-flag-14)
    (new 'static 'sp-field-init-spec
      :field (sp-field-id spt-userdata)
      :flags (sp-flag plain-v2)
      :object (new 'static 'boxed-array :type int32 10 0 0 #xc0c900 #xc03300 #xc02c00)
      )
    (sp-func spt-func 'sparticle-texture-animate)
    )
  )

(defpart 5125
  :init-specs ((sp-tex spt-texture (new 'static 'texture-id :index #xca :page #xc))
    (sp-flt spt-num 1.0)
    (sp-flt spt-y (meters -2.375))
    (sp-flt spt-scale-x (meters 4.5))
    (sp-copy-from-other spt-scale-y -4)
    (sp-flt spt-r 128.0)
    (sp-flt spt-g 196.0)
    (sp-flt spt-b 0.0)
    (sp-flt spt-a 32.0)
    (sp-int spt-timer 5)
    (sp-cpuinfo-flags sp-cpuinfo-flag-2 sp-cpuinfo-flag-3)
    )
  )

(defpart 5131
  :init-specs ((sp-tex spt-texture (new 'static 'texture-id :index #x2c :page #xc))
    (sp-flt spt-num 1.0)
    (sp-flt spt-r 128.0)
    (sp-flt spt-g 196.0)
    (sp-flt spt-b 0.0)
    (sp-rnd-flt spt-a 64.0 32.0 1.0)
    (sp-flt spt-scalevel-x (meters 0.0027777778))
    (sp-copy-from-other spt-scalevel-y -4)
    (sp-flt spt-fade-a -0.10666667)
    (sp-int spt-timer 900)
    (sp-cpuinfo-flags sp-cpuinfo-flag-2 sp-cpuinfo-flag-3)
    )
  )

(defpart 5132
  :init-specs ((sp-tex spt-texture (new 'static 'texture-id :index #x2c :page #xc))
    (sp-flt spt-num 1.0)
    (sp-flt spt-x (meters 0.05))
    (sp-flt spt-r 128.0)
    (sp-flt spt-g 196.0)
    (sp-flt spt-b 0.0)
    (sp-rnd-flt spt-a 32.0 16.0 1.0)
    (sp-flt spt-scalevel-x (meters 0.0027777778))
    (sp-copy-from-other spt-scalevel-y -4)
    (sp-flt spt-fade-a -0.10666667)
    (sp-int spt-timer 900)
    (sp-cpuinfo-flags sp-cpuinfo-flag-2 sp-cpuinfo-flag-4)
    )
  )

(defpartgroup group-castle-console-green-screen
  :id 1190
  :flags (unk-4 unk-6)
  :bounds (static-bspherem 0 0 0 2)
  :rotate ((degrees 90) (degrees 0) (degrees 0))
  :parts ((sp-item 5133 :fade-after (meters 200) :flags (bit6 bit7)))
  )

(defpart 5133
  :init-specs ((sp-tex spt-texture (new 'static 'texture-id :index #xca :page #xc))
    (sp-flt spt-num 1.0)
    (sp-flt spt-y (meters -0.1))
    (sp-flt spt-scale-x (meters 3))
    (sp-flt spt-rot-x 409.6)
    (sp-flt spt-rot-z (degrees 0.0))
    (sp-copy-from-other spt-scale-y -4)
    (sp-flt spt-r 0.0)
    (sp-flt spt-g 255.0)
    (sp-rnd-flt spt-b 0.0 128.0 1.0)
    (sp-rnd-flt spt-a 16.0 16.0 1.0)
    (sp-flt spt-omega 822067.2)
    (sp-int spt-timer 5)
    (sp-cpuinfo-flags sp-cpuinfo-flag-2 glow)
    (sp-flt spt-userdata 1024.0)
    (sp-flt spt-rotate-y (degrees 0.0))
    )
  )

(defpartgroup group-castle-console-flashing-red-light-1
  :id 1191
  :flags (unk-4 unk-6)
  :bounds (static-bspherem 0 0 0 2)
  :rotate ((degrees 90) (degrees 0) (degrees 0))
  :parts ((sp-item 5134 :fade-after (meters 120) :flags (bit6 bit7) :period 150 :length 5))
  )

(defpartgroup group-castle-console-flashing-red-light-2
  :id 1192
  :flags (unk-4 unk-6)
  :bounds (static-bspherem 0 0 0 2)
  :rotate ((degrees 90) (degrees 0) (degrees 0))
  :parts ((sp-item 5134 :fade-after (meters 120) :flags (bit6 bit7) :period 115 :length 5 :offset 65))
  )

(defpart 5134
  :init-specs ((sp-tex spt-texture (new 'static 'texture-id :index #xbb :page #xc))
    (sp-flt spt-num 1.0)
    (sp-flt spt-y (meters -0.1))
    (sp-flt spt-z (meters 0.05))
    (sp-flt spt-scale-x (meters 1))
    (sp-flt spt-rot-x 409.6)
    (sp-flt spt-rot-z (degrees 0.0))
    (sp-copy-from-other spt-scale-y -4)
    (sp-flt spt-r 255.0)
    (sp-flt spt-g 8.0)
    (sp-flt spt-b 8.0)
    (sp-flt spt-a 16.0)
    (sp-flt spt-omega 494387.2)
    (sp-int spt-timer 75)
    (sp-cpuinfo-flags sp-cpuinfo-flag-2 glow)
    (sp-flt spt-userdata 1024.0)
    (sp-flt spt-rotate-y (degrees 0.0))
    )
  )

(defpart 5120
  :init-specs ((sp-tex spt-texture (new 'static 'texture-id :index #xbb :page #xc))
    (sp-flt spt-num 1.0)
    (sp-flt spt-y (meters -0.15))
    (sp-flt spt-scale-x (meters 3))
    (sp-flt spt-rot-x 409.6)
    (sp-copy-from-other spt-scale-y -4)
    (sp-flt spt-r 255.0)
    (sp-flt spt-g 64.0)
    (sp-flt spt-b 64.0)
    (sp-flt spt-a 32.0)
    (sp-flt spt-omega 494387.2)
    (sp-int spt-timer 5)
    (sp-cpuinfo-flags sp-cpuinfo-flag-2 sp-cpuinfo-flag-3 glow)
    (sp-flt spt-userdata 1024.0)
    )
  )

(defpart 5119
  :init-specs ((sp-tex spt-texture (new 'static 'texture-id :index #xbb :page #xc))
    (sp-flt spt-num 1.0)
    (sp-flt spt-y (meters -0.15))
    (sp-flt spt-scale-x (meters 3))
    (sp-flt spt-rot-x 409.6)
    (sp-copy-from-other spt-scale-y -4)
    (sp-flt spt-r 0.0)
    (sp-flt spt-g 128.0)
    (sp-flt spt-b 255.0)
    (sp-flt spt-a 32.0)
    (sp-flt spt-omega 494387.2)
    (sp-int spt-timer 5)
    (sp-cpuinfo-flags sp-cpuinfo-flag-2 sp-cpuinfo-flag-3 glow)
    (sp-flt spt-userdata 1024.0)
    )
  )

(defpartgroup group-castle-green-dome-light
  :id 1193
  :flags (unk-4)
  :bounds (static-bspherem 0 0 0 2)
  :parts ((sp-item 5135 :flags (bit6 bit7)))
  )

(defpart 5135
  :init-specs ((sp-tex spt-texture (new 'static 'texture-id :index #xca :page #xc))
    (sp-flt spt-num 1.0)
    (sp-flt spt-z (meters -0.25))
    (sp-flt spt-scale-x (meters 4.5))
    (sp-flt spt-rot-x 409.6)
    (sp-copy-from-other spt-scale-y -4)
    (sp-flt spt-r 48.0)
    (sp-flt spt-g 196.0)
    (sp-flt spt-b 48.0)
    (sp-flt spt-a 32.0)
    (sp-flt spt-omega 822067.2)
    (sp-int spt-timer 5)
    (sp-cpuinfo-flags sp-cpuinfo-flag-2 sp-cpuinfo-flag-3 glow)
    (sp-flt spt-userdata 1024.0)
    (sp-flt spt-rotate-y (degrees 0.0))
    )
  )

(defun castle-green-dome-light-pulsate ((arg0 int) (arg1 sparticle-cpuinfo) (arg2 sparticle-launchinfo))
  (with-pp
    (let ((s5-0 lerp-scale)
          (s4-0 32.0)
          (s3-0 64.0)
          (t9-0 sin)
          (f0-0 3640.889)
          (f1-1 (* 0.0033333334 (the float (-> pp clock frame-counter))))
          )
      (set! (-> arg2 coneradius)
            (s5-0 s4-0 s3-0 (t9-0 (* f0-0 (- f1-1 (* (the float (the int (/ f1-1 360.0))) 360.0)))) -1.0 1.0)
            )
      )
    )
  )

(defpartgroup group-castle-steamvent
  :id 1194
  :flags (unk-4)
  :bounds (static-bspherem 0 0 0 6)
  :parts ((sp-item 5136 :fade-after (meters 100) :falloff-to (meters 100) :flags (bit7))
    (sp-item 5137 :fade-after (meters 100) :falloff-to (meters 100) :flags (bit7))
    )
  )

(defpart 5136
  :init-specs ((sp-tex spt-texture (new 'static 'texture-id :page #xc))
    (sp-rnd-flt spt-num 0.5 1.0 1.0)
    (sp-rnd-int-flt spt-x (meters -0.4) 4 819.2)
    (sp-rnd-flt spt-y (meters -0.1) (meters 0.3) 1.0)
    (sp-rnd-flt spt-z (meters 0.2) (meters 0.2) 1.0)
    (sp-rnd-flt spt-scale-x (meters 1.4) (meters 0.25) 1.0)
    (sp-rnd-flt spt-rot-z (degrees 0.0) (degrees 360.0) 1.0)
    (sp-copy-from-other spt-scale-y -4)
    (sp-rnd-flt spt-r 64.0 32.0 1.0)
    (sp-rnd-flt spt-g 32.0 16.0 1.0)
    (sp-flt spt-b 0.0)
    (sp-flt spt-a 0.0)
    (sp-rnd-flt spt-vel-z (meters 0.006666667) (meters 0.0033333334) 1.0)
    (sp-rnd-flt spt-scalevel-x (meters 0.0016666667) (meters 0.0033333334) 1.0)
    (sp-rnd-flt spt-rotvel-z (degrees -1.2) (degrees 2.4) 1.0)
    (sp-copy-from-other spt-scalevel-y -4)
    (sp-flt spt-fade-a 0.42666668)
    (sp-rnd-flt spt-accel-y 0.54613334 0.54613334 1.0)
    (sp-flt spt-friction 0.99)
    (sp-int spt-timer 600)
    (sp-cpuinfo-flags sp-cpuinfo-flag-2 sp-cpuinfo-flag-12)
    (sp-int-plain-rnd spt-next-time 100 24 1)
    (sp-launcher-by-id spt-next-launcher 5138)
    (sp-rnd-flt spt-launchrot-x (degrees -5.0) (degrees 10.0) 1.0)
    (sp-rnd-flt spt-launchrot-y (degrees -5.0) (degrees 10.0) 1.0)
    (sp-flt spt-rotate-y (degrees 0.0))
    )
  )

(defpart 5137
  :init-specs ((sp-tex spt-texture (new 'static 'texture-id :page #xc))
    (sp-rnd-flt spt-num 1.0 1.0 1.0)
    (sp-rnd-int-flt spt-x (meters -0.3) 1 0.0)
    (sp-rnd-flt spt-y (meters 0) (meters 0.3) 1.0)
    (sp-rnd-flt spt-z (meters 0.6) (meters 0.2) 1.0)
    (sp-rnd-flt spt-scale-x (meters 0.3) (meters 0.25) 1.0)
    (sp-rnd-flt spt-rot-z (degrees 0.0) (degrees 360.0) 1.0)
    (sp-copy-from-other spt-scale-y -4)
    (sp-rnd-flt spt-r 64.0 32.0 1.0)
    (sp-rnd-flt spt-g 32.0 16.0 1.0)
    (sp-flt spt-b 0.0)
    (sp-flt spt-a 0.0)
    (sp-rnd-flt spt-vel-z (meters 0.006666667) (meters 0.0033333334) 1.0)
    (sp-rnd-flt spt-scalevel-x (meters 0.0016666667) (meters 0.0033333334) 1.0)
    (sp-rnd-flt spt-rotvel-z (degrees -1.2) (degrees 2.4) 1.0)
    (sp-copy-from-other spt-scalevel-y -4)
    (sp-flt spt-fade-a 0.42666668)
    (sp-rnd-flt spt-accel-y 0.4096 0.4096 1.0)
    (sp-flt spt-friction 0.99)
    (sp-int spt-timer 600)
    (sp-cpuinfo-flags sp-cpuinfo-flag-2 sp-cpuinfo-flag-12)
    (sp-int-plain-rnd spt-next-time 100 24 1)
    (sp-launcher-by-id spt-next-launcher 5138)
    (sp-rnd-flt spt-launchrot-x (degrees -5.0) (degrees 10.0) 1.0)
    (sp-rnd-flt spt-launchrot-y (degrees -5.0) (degrees 10.0) 1.0)
    (sp-flt spt-rotate-y (degrees 0.0))
    )
  )

(defpart 5138
  :init-specs ((sp-rnd-flt spt-fade-r 0.64 0.42666668 1.0)
    (sp-rnd-flt spt-fade-g 0.85333335 0.42666668 1.0)
    (sp-rnd-flt spt-fade-a -0.10666667 -0.10666667 1.0)
    )
  )

(defpart 5139
  :init-specs ((sp-flt spt-r 64.0)
    (sp-flt spt-g 64.0)
    (sp-flt spt-b 64.0)
    (sp-rnd-flt spt-fade-a -0.10666667 -0.10666667 1.0)
    )
  )

(defpartgroup group-castle-pipe-green-steam
  :id 1195
  :flags (unk-4)
  :bounds (static-bspherem 0 0 0 6)
  :parts ((sp-item 5140 :fade-after (meters 60) :falloff-to (meters 60) :flags (bit7))
    (sp-item 5141 :fade-after (meters 100) :falloff-to (meters 140) :flags (bit7))
    )
  )

(defpart 5140
  :init-specs ((sp-tex spt-texture (new 'static 'texture-id :index #x92 :page #xc))
    (sp-rnd-flt spt-num 0.0 5.0 1.0)
    (sp-flt spt-scale-x (meters 0.1))
    (sp-int spt-rot-x 4)
    (sp-copy-from-other spt-scale-y -4)
    (sp-rnd-flt spt-r 0.0 64.0 1.0)
    (sp-rnd-flt spt-g 64.0 64.0 1.0)
    (sp-flt spt-b 64.0)
    (sp-rnd-flt spt-a 64.0 32.0 1.0)
    (sp-flt spt-omega 4.096)
    (sp-rnd-flt spt-vel-z (meters 0.083333336) (meters 0.033333335) 1.0)
    (sp-rnd-flt spt-fade-a -0.64 -0.64 1.0)
    (sp-rnd-flt spt-friction 0.93 0.025 1.0)
    (sp-int spt-timer 150)
    (sp-cpuinfo-flags sp-cpuinfo-flag-2 sp-cpuinfo-flag-12)
    (sp-func spt-func 'sparticle-motion-blur)
    (sp-rnd-flt spt-launchrot-x (degrees -7.5) (degrees 15.0) 1.0)
    (sp-rnd-flt spt-launchrot-y (degrees -7.5) (degrees 15.0) 1.0)
    (sp-flt spt-rotate-y (degrees 0.0))
    )
  )

(defpart 5141
  :init-specs ((sp-tex spt-texture (new 'static 'texture-id :page #xc))
    (sp-rnd-flt spt-num 1.0 3.0 1.0)
    (sp-rnd-flt spt-scale-x (meters 0.5) (meters 0.25) 1.0)
    (sp-rnd-flt spt-rot-z (degrees 0.0) (degrees 360.0) 1.0)
    (sp-copy-from-other spt-scale-y -4)
    (sp-rnd-flt spt-r 0.0 128.0 1.0)
    (sp-rnd-flt spt-g 128.0 32.0 1.0)
    (sp-flt spt-b 0.0)
    (sp-flt spt-a 0.0)
    (sp-rnd-flt spt-vel-z (meters 0.05) (meters 0.033333335) 1.0)
    (sp-rnd-flt spt-scalevel-x (meters 0.01) (meters 0.016666668) 1.0)
    (sp-rnd-flt spt-rotvel-z (degrees -1.2) (degrees 2.4) 1.0)
    (sp-copy-from-other spt-scalevel-y -4)
    (sp-flt spt-fade-a 0.96)
    (sp-rnd-flt spt-friction 0.93 0.025 1.0)
    (sp-int spt-timer 150)
    (sp-cpuinfo-flags sp-cpuinfo-flag-2 sp-cpuinfo-flag-3 sp-cpuinfo-flag-12)
    (sp-int-plain-rnd spt-next-time 25 24 1)
    (sp-launcher-by-id spt-next-launcher 5142)
    (sp-rnd-flt spt-launchrot-x (degrees -5.0) (degrees 10.0) 1.0)
    (sp-rnd-flt spt-launchrot-y (degrees -5.0) (degrees 10.0) 1.0)
    (sp-flt spt-rotate-y (degrees 0.0))
    )
  )

(defpart 5142
  :init-specs ((sp-rnd-flt spt-fade-a -0.48 -0.48 1.0))
  )

(defpartgroup group-castle-pod-pipe
  :id 1196
  :flags (unk-4)
  :bounds (static-bspherem 0 0 0 6)
  :parts ((sp-item 5143 :fade-after (meters 60) :falloff-to (meters 60) :flags (bit7))
    (sp-item 5144 :fade-after (meters 100) :falloff-to (meters 140) :flags (bit7))
    )
  )

(defpart 5143
  :init-specs ((sp-tex spt-texture (new 'static 'texture-id :index #x92 :page #xc))
    (sp-rnd-flt spt-num 0.0 5.0 1.0)
    (sp-flt spt-scale-x (meters 0.1))
    (sp-int spt-rot-x 4)
    (sp-copy-from-other spt-scale-y -4)
    (sp-flt spt-r 128.0)
    (sp-copy-from-other spt-g -1)
    (sp-copy-from-other spt-b -1)
    (sp-rnd-flt spt-a 64.0 32.0 1.0)
    (sp-flt spt-omega 4.096)
    (sp-rnd-flt spt-vel-z (meters 0.083333336) (meters 0.033333335) 1.0)
    (sp-rnd-flt spt-fade-a -0.64 -0.64 1.0)
    (sp-rnd-flt spt-friction 0.93 0.025 1.0)
    (sp-int spt-timer 150)
    (sp-cpuinfo-flags sp-cpuinfo-flag-2 sp-cpuinfo-flag-12)
    (sp-func spt-func 'sparticle-motion-blur)
    (sp-rnd-flt spt-launchrot-x (degrees -7.5) (degrees 15.0) 1.0)
    (sp-rnd-flt spt-launchrot-y (degrees -7.5) (degrees 15.0) 1.0)
    (sp-flt spt-rotate-y (degrees 0.0))
    )
  )

(defpart 5144
  :init-specs ((sp-tex spt-texture (new 'static 'texture-id :page #xc))
    (sp-rnd-flt spt-num 1.0 3.0 1.0)
    (sp-rnd-flt spt-scale-x (meters 0.5) (meters 0.25) 1.0)
    (sp-rnd-flt spt-rot-z (degrees 0.0) (degrees 360.0) 1.0)
    (sp-copy-from-other spt-scale-y -4)
    (sp-rnd-flt spt-r 64.0 128.0 1.0)
    (sp-copy-from-other spt-g -1)
    (sp-copy-from-other spt-b -1)
    (sp-flt spt-a 0.0)
    (sp-rnd-flt spt-vel-z (meters 0.083333336) (meters 0.033333335) 1.0)
    (sp-rnd-flt spt-scalevel-x (meters 0.01) (meters 0.016666668) 1.0)
    (sp-rnd-flt spt-rotvel-z (degrees -1.2) (degrees 2.4) 1.0)
    (sp-copy-from-other spt-scalevel-y -4)
    (sp-flt spt-fade-a 0.96)
    (sp-rnd-flt spt-friction 0.93 0.025 1.0)
    (sp-int spt-timer 150)
    (sp-cpuinfo-flags sp-cpuinfo-flag-2 sp-cpuinfo-flag-3 sp-cpuinfo-flag-12)
    (sp-int-plain-rnd spt-next-time 25 24 1)
    (sp-launcher-by-id spt-next-launcher 5145)
    (sp-rnd-flt spt-launchrot-x (degrees -5.0) (degrees 10.0) 1.0)
    (sp-rnd-flt spt-launchrot-y (degrees -5.0) (degrees 10.0) 1.0)
    (sp-flt spt-rotate-y (degrees 0.0))
    )
  )

(defpart 5145
  :init-specs ((sp-rnd-flt spt-fade-a -0.48 -0.48 1.0))
  )

(defpartgroup group-castle-green-slime
  :id 1197
  :bounds (static-bspherem 0 0 0 2)
  :parts ((sp-item 5146 :fade-after (meters 150) :falloff-to (meters 85) :period 300 :length 5)
    (sp-item 5147 :fade-after (meters 150) :falloff-to (meters 100))
    )
  )

(defpart 5146
  :init-specs ((sp-tex spt-texture (new 'static 'texture-id :index #x2 :page #xb9a))
    (sp-flt spt-num 1.0)
    (sp-rnd-flt spt-x (meters -3) (meters 6) 1.0)
    (sp-rnd-flt spt-z (meters -3) (meters 6) 1.0)
    (sp-flt spt-scale-x (meters 0))
    (sp-copy-from-other spt-scale-y -4)
    (sp-flt spt-r 32.0)
    (sp-flt spt-g 196.0)
    (sp-flt spt-b 48.0)
    (sp-flt spt-a 196.0)
    (sp-int spt-timer 900)
    (sp-cpuinfo-flags sp-cpuinfo-flag-2 sp-cpuinfo-flag-3)
    (sp-int-plain-rnd spt-next-time 0 599 1)
    (sp-launcher-by-id spt-next-launcher 5148)
    )
  )

(defpart 5148
  :init-specs ((sp-rnd-flt spt-scalevel-x (meters 0.002) (meters 0.002) 1.0)
    (sp-rnd-flt spt-scalevel-y (meters 0.001) (meters 0.001) 1.0)
    (sp-int spt-timer 300)
    (sp-int-plain-rnd spt-next-time 150 149 1)
    (sp-launcher-by-id spt-next-launcher 5149)
    )
  )

(defpart 5149
  :init-specs ((sp-rnd-flt spt-scalevel-x (meters 0.00066666666) (meters 0.00066666666) 1.0)
    (sp-rnd-flt spt-scalevel-y (meters 0.00033333333) (meters 0.00033333333) 1.0)
    (sp-int spt-timer 600)
    (sp-int-plain-rnd spt-next-time 150 449 1)
    (sp-launcher-by-id spt-next-launcher 5150)
    )
  )

(defpart 5150
  :init-specs ((sp-func spt-func 'castle-green-slime-popper))
  )

(defun castle-green-slime-popper ((arg0 sparticle-system) (arg1 sparticle-cpuinfo) (arg2 matrix))
  (set! (-> arg1 sp-func) (the-as (function sparticle-system sparticle-cpuinfo sprite-vec-data-3d uint none) 0))
  (let ((gp-0 (new 'stack-no-clear 'vector)))
    (sp-kill-particle arg0 arg1)
    (set-vector! gp-0 (-> arg2 vector 0 x) (-> arg2 vector 0 y) (-> arg2 vector 0 z) 1.0)
    (let ((t9-1 sp-launch-particles-var)
          (a0-2 *sp-particle-system-2d*)
          (a1-1 (-> *part-id-table* 5151))
          (a2-1 *launch-matrix*)
          )
      (set! (-> a2-1 trans quad) (-> gp-0 quad))
      (t9-1 a0-2 a1-1 a2-1 (the-as sparticle-launch-state #f) (the-as sparticle-launch-control #f) 1.0)
      )
    (let ((t9-2 sp-launch-particles-var)
          (a0-3 *sp-particle-system-2d*)
          (a1-2 (-> *part-id-table* 5152))
          (a2-2 *launch-matrix*)
          )
      (set! (-> a2-2 trans quad) (-> gp-0 quad))
      (t9-2 a0-3 a1-2 a2-2 (the-as sparticle-launch-state #f) (the-as sparticle-launch-control #f) 1.0)
      )
    (let ((t9-3 sp-launch-particles-var)
          (a0-4 *sp-particle-system-3d*)
          (a1-3 (-> *part-id-table* 5153))
          (a2-3 *launch-matrix*)
          )
      (set! (-> a2-3 trans quad) (-> gp-0 quad))
      (t9-3 a0-4 a1-3 a2-3 (the-as sparticle-launch-state #f) (the-as sparticle-launch-control #f) 1.0)
      )
    )
  (none)
  )

(defpart 5153
  :init-specs ((sp-tex spt-texture (new 'static 'texture-id :index #x33 :page #xc))
    (sp-flt spt-num 3.0)
    (sp-flt spt-y (meters 0))
    (sp-rnd-flt spt-scale-x (meters 0.25) (meters 0.1) 1.0)
    (sp-rnd-flt spt-rot-y (degrees 0.0) (degrees 3600.0) 1.0)
    (sp-copy-from-other spt-scale-y -4)
    (sp-rnd-flt spt-r 0.0 128.0 1.0)
    (sp-flt spt-g 255.0)
    (sp-flt spt-b 0.0)
    (sp-flt spt-a 255.0)
    (sp-rnd-flt spt-scalevel-x (meters 0.0375) (meters 0.0375) 1.0)
    (sp-copy-from-other spt-scalevel-y -4)
    (sp-rnd-flt spt-fade-a -3.1875 -3.1875 1.0)
    (sp-int spt-timer 80)
    (sp-cpuinfo-flags sp-cpuinfo-flag-2 sp-cpuinfo-flag-3 sp-cpuinfo-flag-12)
    )
  )

(defpart 5152
  :init-specs ((sp-tex spt-texture (new 'static 'texture-id :index #xbb :page #xc))
    (sp-flt spt-num 1.0)
    (sp-rnd-flt spt-scale-x (meters 2) (meters 0.1) 1.0)
    (sp-flt spt-rot-x 409.6)
    (sp-flt spt-rot-z (degrees -17.0))
    (sp-copy-from-other spt-scale-y -4)
    (sp-rnd-flt spt-r 64.0 196.0 1.0)
    (sp-flt spt-g 255.0)
    (sp-rnd-flt spt-b 0.0 64.0 1.0)
    (sp-flt spt-a 22.0)
    (sp-flt spt-omega 494387.2)
    (sp-flt spt-fade-a -0.8)
    (sp-int spt-timer 15)
    (sp-cpuinfo-flags sp-cpuinfo-flag-2 sp-cpuinfo-flag-3 glow)
    (sp-flt spt-userdata 2048.0)
    )
  )

(defpart 5151
  :init-specs ((sp-tex spt-texture (new 'static 'texture-id :index #x21 :page #xc))
    (sp-rnd-flt spt-num 8.0 8.0 1.0)
    (sp-rnd-flt spt-x (meters 0) (meters 0.3) 1.0)
    (sp-rnd-flt spt-scale-x (meters 0.2) (meters 0.1) 1.0)
    (sp-rnd-flt spt-rot-z (degrees 0.0) (degrees 3600.0) 1.0)
    (sp-rnd-flt spt-scale-y (meters 0.2) (meters 0.1) 1.0)
    (sp-rnd-flt spt-r 0.0 128.0 1.0)
    (sp-flt spt-g 255.0)
    (sp-flt spt-b 0.0)
    (sp-rnd-flt spt-a 64.0 64.0 1.0)
    (sp-rnd-flt spt-vel-y (meters 0.026666667) (meters 0.013333334) 1.0)
    (sp-rnd-flt spt-scalevel-x (meters -0.0013333333) (meters 0.00033333333) 1.0)
    (sp-rnd-flt spt-rotvel-z (degrees -1.2) (degrees 2.4) 1.0)
    (sp-rnd-flt spt-scalevel-y (meters -0.0013333333) (meters 0.00033333333) 1.0)
    (sp-rnd-flt spt-fade-a -0.21333334 -0.21333334 1.0)
    (sp-rnd-flt spt-accel-y -4.096 -2.7306666 1.0)
    (sp-rnd-flt spt-friction 0.93 0.02 1.0)
    (sp-int spt-timer 300)
    (sp-cpuinfo-flags sp-cpuinfo-flag-0 sp-cpuinfo-flag-3 use-global-acc)
    (sp-rnd-flt spt-conerot-x (degrees 0.0) (degrees 60.0) 1.0)
    (sp-rnd-flt spt-conerot-y (degrees 0.0) (degrees 3600.0) 1.0)
    (sp-rnd-flt spt-rotate-y (degrees 0.0) (degrees 3600.0) 1.0)
    (sp-rnd-flt spt-conerot-radius (meters 0) (meters -0.2) 1.0)
    )
  )

(defpart 5147
  :init-specs ((sp-tex spt-texture (new 'static 'texture-id :page #xc))
    (sp-rnd-flt spt-num 0.0 0.05 1.0)
    (sp-rnd-flt spt-x (meters 0) (meters 5) 1.0)
    (sp-flt spt-y (meters 1))
    (sp-rnd-flt spt-scale-x (meters 4) (meters 2) 1.0)
    (sp-rnd-flt spt-rot-z (degrees 0.0) (degrees 360.0) 1.0)
    (sp-copy-from-other spt-scale-y -4)
    (sp-rnd-flt spt-r 0.0 128.0 1.0)
    (sp-rnd-flt spt-g 128.0 128.0 1.0)
    (sp-flt spt-b 0.0)
    (sp-flt spt-a 0.0)
    (sp-rnd-flt spt-vel-y (meters 0.006666667) (meters 0.006666667) 1.0)
    (sp-flt spt-scalevel-x (meters 0.0033333334))
    (sp-rnd-flt spt-rotvel-z (degrees -0.2) (degrees 0.4) 1.0)
    (sp-copy-from-other spt-scalevel-y -4)
    (sp-flt spt-fade-a 0.21333334)
    (sp-rnd-flt spt-friction 0.92 0.01 1.0)
    (sp-int spt-timer 1200)
    (sp-cpuinfo-flags sp-cpuinfo-flag-2 sp-cpuinfo-flag-3)
    (sp-int-plain-rnd spt-next-time 75 74 1)
    (sp-launcher-by-id spt-next-launcher 5154)
    (sp-rnd-flt spt-rotate-y (degrees 0.0) (degrees 3600.0) 1.0)
    )
  )

(defpart 5154
  :init-specs ((sp-flt spt-fade-a 0.0) (sp-int spt-next-time 150) (sp-launcher-by-id spt-next-launcher 5155))
  )

(defpart 5155
  :init-specs ((sp-flt spt-fade-g -0.42666668) (sp-int spt-next-time 150) (sp-launcher-by-id spt-next-launcher 5156))
  )

(defpart 5156
  :init-specs ((sp-flt spt-fade-r 0.0) (sp-flt spt-fade-g 0.0) (sp-flt spt-fade-a -0.10666667))
  )

(defpartgroup group-castle-green-slime-tube
  :id 1198
  :linger-duration (seconds 12)
  :flags (unk-4 unk-6)
  :bounds (static-bspherem 0 4 0 6)
  :rotate ((degrees 90) (degrees 0) (degrees 180))
  :parts ((sp-item 5157 :fade-after (meters 150) :falloff-to (meters 100) :flags (is-3d bit7))
    (sp-item 5158 :fade-after (meters 150) :falloff-to (meters 100) :flags (is-3d bit7))
    )
  )

(defpart 5157
  :init-specs ((sp-tex spt-texture (new 'static 'texture-id :index #x14 :page #xc))
    (sp-func spt-birth-func 'birth-func-castle-green-slime-tube)
    (sp-rnd-flt spt-num 0.008 0.002 1.0)
    (sp-rnd-flt spt-x (meters -0.25) (meters 0.5) 1.0)
    (sp-rnd-flt spt-y (meters -0.5) (meters -1) 1.0)
    (sp-rnd-flt spt-scale-x (meters 3) (meters 2) 1.0)
    (sp-flt spt-rot-x 16384.0)
    (sp-copy-from-other spt-scale-y -4)
    (sp-rnd-flt spt-r 16.0 8.0 1.0)
    (sp-rnd-flt spt-g 64.0 64.0 1.0)
    (sp-rnd-flt spt-b 16.0 8.0 1.0)
    (sp-rnd-flt spt-a 32.0 32.0 1.0)
    (sp-rnd-flt spt-vel-y (meters 0.0033333334) (meters 0.0044444446) 1.0)
    (sp-rnd-flt spt-scalevel-x (meters -0.00083333335) (meters -0.00083333335) 1.0)
    (sp-rnd-flt spt-rotvel-y (degrees -0.2) (degrees 0.2) 1.0)
    (sp-rnd-flt spt-scalevel-y (meters -0.00055555557) (meters -0.00083333335) 1.0)
    (sp-flt spt-friction 0.9995)
    (sp-int spt-timer 3600)
    (sp-cpuinfo-flags sp-cpuinfo-flag-0 sp-cpuinfo-flag-2 sp-cpuinfo-flag-3)
    (sp-flt spt-userdata 34816.0)
    (sp-func spt-func 'castle-green-slime-tube-check-delta)
    (sp-flt spt-rotate-y (degrees 0.0))
    )
  )

(defpart 5158
  :init-specs ((sp-tex spt-texture (new 'static 'texture-id :index #x14 :page #xc))
    (sp-func spt-birth-func 'birth-func-castle-green-slime-tube)
    (sp-rnd-flt spt-num 0.008 0.002 1.0)
    (sp-rnd-flt spt-x (meters -0.25) (meters 0.5) 1.0)
    (sp-rnd-flt spt-y (meters -0.8) (meters -1) 1.0)
    (sp-rnd-flt spt-scale-x (meters 0.5) (meters 1.5) 1.0)
    (sp-flt spt-rot-x 16384.0)
    (sp-copy-from-other spt-scale-y -4)
    (sp-rnd-flt spt-r 32.0 8.0 1.0)
    (sp-rnd-flt spt-g 64.0 64.0 1.0)
    (sp-rnd-flt spt-b 32.0 8.0 1.0)
    (sp-rnd-flt spt-a 48.0 16.0 1.0)
    (sp-rnd-flt spt-vel-y (meters 0.0033333334) (meters 0.0044444446) 1.0)
    (sp-rnd-flt spt-scalevel-x (meters 0.0016666667) (meters 0.00055555557) 1.0)
    (sp-rnd-flt spt-rotvel-y (degrees -0.2) (degrees 0.2) 1.0)
    (sp-rnd-flt spt-scalevel-y (meters 0.0011111111) (meters 0.00055555557) 1.0)
    (sp-flt spt-friction 0.9995)
    (sp-int spt-timer 3600)
    (sp-cpuinfo-flags sp-cpuinfo-flag-0 sp-cpuinfo-flag-2 sp-cpuinfo-flag-3)
    (sp-flt spt-userdata 34816.0)
    (sp-func spt-func 'castle-green-slime-tube-check-delta)
    (sp-flt spt-rotate-y (degrees 0.0))
    )
  )

(defun birth-func-castle-green-slime-tube ((arg0 int) (arg1 sparticle-cpuinfo) (arg2 sparticle-launchinfo))
  (set! (-> arg1 omega) (-> arg2 launchrot y))
  0
  (none)
  )

(defun castle-green-slime-tube-check-delta ((arg0 sparticle-system) (arg1 sparticle-cpuinfo) (arg2 matrix))
  (let ((f1-1 (- (-> arg2 vector 0 y) (-> arg1 omega))))
    (set! (-> arg1 user-float) (- (-> arg1 user-float) (fabs f1-1)))
    )
  (set! (-> arg1 omega) (-> arg2 vector 0 y))
  (when (< (-> arg1 user-float) 8192.0)
    (let ((f0-7 (fabs (/ (-> arg1 user-float) (-> arg1 vel-sxvel y)))))
      (/ (- (-> arg2 vector 1 w)) f0-7)
      (set! (-> arg1 fade w) (/ (- (-> arg2 vector 2 w)) f0-7))
      )
    (set! (-> arg1 sp-func) (the-as (function sparticle-system sparticle-cpuinfo sprite-vec-data-3d uint none) 0))
    0
    )
  (none)
  )

(defpartgroup group-castle-pod-green-slime-tube
  :id 1199
  :flags (unk-4 unk-6)
  :bounds (static-bspherem 0 4 0 6)
  :rotate ((degrees 90) (degrees 0) (degrees 180))
  :parts ((sp-item 209))
  )

(defpartgroup group-castle-pod-dial-small
  :id 1200
  :flags (use-local-clock unk-4 unk-6)
  :bounds (static-bspherem 0 0 0 2)
  :rotate ((degrees 90) (degrees 0) (degrees 0))
  :parts ((sp-item 5159 :flags (is-3d launch-asap bit7) :period 300 :length 5)
    (sp-item 5160 :flags (is-3d bit6 bit7))
    (sp-item 5161 :fade-after (meters 100) :flags (bit7) :period 150 :length 5)
    )
  )

(defpart 5160
  :init-specs ((sp-tex spt-texture (new 'static 'texture-id :page #xb9a))
    (sp-flt spt-num 1.0)
    (sp-flt spt-scale-x (meters 0.9))
    (sp-flt spt-rot-z (degrees 0.0))
    (sp-copy-from-other spt-scale-y -4)
    (sp-flt spt-r 128.0)
    (sp-flt spt-g 128.0)
    (sp-flt spt-b 128.0)
    (sp-flt spt-a 128.0)
    (sp-int spt-timer 1)
    (sp-cpuinfo-flags sp-cpuinfo-flag-2 aux-list)
    (sp-flt spt-rotate-y (degrees 0.0))
    )
  )

(defpart 5159
  :init-specs ((sp-tex spt-texture (new 'static 'texture-id :index #x1 :page #xb9a))
    (sp-flt spt-num 1.0)
    (sp-flt spt-y (meters 0.05))
    (sp-flt spt-scale-x (meters 0.158))
    (sp-flt spt-scale-y (meters 0.8))
    (sp-flt spt-r 128.0)
    (sp-flt spt-g 128.0)
    (sp-flt spt-b 128.0)
    (sp-flt spt-a 80.0)
    (sp-rnd-flt spt-rotvel-y (degrees -1.2) (degrees 2.4) 1.0)
    (sp-int spt-timer 1200)
    (sp-cpuinfo-flags sp-cpuinfo-flag-2 sp-cpuinfo-flag-4 aux-list left-multiply-quat)
    (sp-int-plain-rnd spt-next-time 25 599 1)
    (sp-launcher-by-id spt-next-launcher 5162)
    (sp-rnd-flt spt-rotate-y (degrees 0.0) (degrees 360.0) 1.0)
    )
  )

(defpart 5161
  :init-specs ((sp-tex spt-texture (new 'static 'texture-id :index #xc9 :page #xc))
    (sp-flt spt-num 1.0)
    (sp-flt spt-y (meters 0.025))
    (sp-flt spt-z (meters 0.35))
    (sp-flt spt-scale-x (meters 0.15))
    (sp-flt spt-rot-z (degrees 0.0))
    (sp-copy-from-other spt-scale-y -4)
    (sp-flt spt-r 255.0)
    (sp-flt spt-g 0.0)
    (sp-flt spt-b 0.0)
    (sp-flt spt-a 128.0)
    (sp-int spt-timer 155)
    (sp-cpuinfo-flags sp-cpuinfo-flag-2)
    (sp-int spt-next-time 75)
    (sp-launcher-by-id spt-next-launcher 5163)
    (sp-flt spt-rotate-y (degrees 0.0))
    )
  )

(defpartgroup group-castle-pod-dial-large
  :id 1201
  :flags (use-local-clock unk-4 unk-6)
  :bounds (static-bspherem 0 0 0 2)
  :rotate ((degrees 90) (degrees 0) (degrees 0))
  :parts ((sp-item 5164 :flags (is-3d launch-asap bit6 bit7) :period 300 :length 5)
    (sp-item 5165 :flags (is-3d bit6 bit7))
    (sp-item 5166 :fade-after (meters 100) :flags (bit7) :period 150 :length 5)
    )
  )

(defpart 5165
  :init-specs ((sp-tex spt-texture (new 'static 'texture-id :page #xb9a))
    (sp-flt spt-num 1.0)
    (sp-flt spt-scale-x (meters 1.45))
    (sp-flt spt-rot-z (degrees 0.0))
    (sp-copy-from-other spt-scale-y -4)
    (sp-flt spt-r 128.0)
    (sp-flt spt-g 128.0)
    (sp-flt spt-b 128.0)
    (sp-flt spt-a 128.0)
    (sp-int spt-timer 1)
    (sp-cpuinfo-flags sp-cpuinfo-flag-2 aux-list)
    (sp-flt spt-rotate-y (degrees 0.0))
    )
  )

(defpart 5164
  :init-specs ((sp-tex spt-texture (new 'static 'texture-id :index #x1 :page #xb9a))
    (sp-flt spt-num 1.0)
    (sp-flt spt-y (meters 0.05))
    (sp-flt spt-scale-x (meters 0.225))
    (sp-flt spt-scale-y (meters 1.4))
    (sp-flt spt-r 128.0)
    (sp-flt spt-g 128.0)
    (sp-flt spt-b 128.0)
    (sp-flt spt-a 80.0)
    (sp-rnd-flt spt-rotvel-y (degrees -1.2) (degrees 2.4) 1.0)
    (sp-int spt-timer 1200)
    (sp-cpuinfo-flags sp-cpuinfo-flag-2 sp-cpuinfo-flag-4 aux-list left-multiply-quat)
    (sp-int-plain-rnd spt-next-time 25 599 1)
    (sp-launcher-by-id spt-next-launcher 5162)
    (sp-rnd-flt spt-rotate-y (degrees 0.0) (degrees 360.0) 1.0)
    )
  )

(defpart 5166
  :init-specs ((sp-tex spt-texture (new 'static 'texture-id :index #xc9 :page #xc))
    (sp-flt spt-num 1.0)
    (sp-flt spt-y (meters 0.025))
    (sp-flt spt-z (meters 0.5))
    (sp-flt spt-scale-x (meters 0.15))
    (sp-flt spt-rot-z (degrees 0.0))
    (sp-copy-from-other spt-scale-y -4)
    (sp-flt spt-r 255.0)
    (sp-flt spt-g 0.0)
    (sp-flt spt-b 0.0)
    (sp-flt spt-a 128.0)
    (sp-int spt-timer 155)
    (sp-cpuinfo-flags sp-cpuinfo-flag-2)
    (sp-int spt-next-time 75)
    (sp-launcher-by-id spt-next-launcher 5163)
    (sp-flt spt-rotate-y (degrees 0.0))
    )
  )

(defpartgroup group-castle-dial-small
  :id 1202
  :flags (unk-4 unk-6)
  :bounds (static-bspherem 0 0 0 2)
  :rotate ((degrees 90) (degrees 0) (degrees 0))
  :parts ((sp-item 5167 :flags (is-3d launch-asap bit7) :period 300 :length 5)
    (sp-item 5168 :flags (is-3d bit6 bit7))
    (sp-item 5169 :fade-after (meters 100) :flags (bit7) :period 150 :length 5)
    )
  )

(defpart 5168
  :init-specs ((sp-tex spt-texture (new 'static 'texture-id :page #xb9a))
    (sp-flt spt-num 1.0)
    (sp-flt spt-scale-x (meters 1.7))
    (sp-flt spt-rot-z (degrees 0.0))
    (sp-copy-from-other spt-scale-y -4)
    (sp-flt spt-r 128.0)
    (sp-flt spt-g 128.0)
    (sp-flt spt-b 128.0)
    (sp-flt spt-a 128.0)
    (sp-int spt-timer 1)
    (sp-cpuinfo-flags sp-cpuinfo-flag-2 aux-list)
    (sp-flt spt-rotate-y (degrees 0.0))
    )
  )

(defpart 5167
  :init-specs ((sp-tex spt-texture (new 'static 'texture-id :index #x1 :page #xb9a))
    (sp-flt spt-num 1.0)
    (sp-flt spt-y (meters 0.05))
    (sp-flt spt-scale-x (meters 0.225))
    (sp-flt spt-scale-y (meters 1.5))
    (sp-flt spt-r 128.0)
    (sp-flt spt-g 128.0)
    (sp-flt spt-b 128.0)
    (sp-flt spt-a 80.0)
    (sp-rnd-flt spt-rotvel-y (degrees -1.2) (degrees 2.4) 1.0)
    (sp-int spt-timer 1200)
    (sp-cpuinfo-flags sp-cpuinfo-flag-2 sp-cpuinfo-flag-4 aux-list left-multiply-quat)
    (sp-int-plain-rnd spt-next-time 25 599 1)
    (sp-launcher-by-id spt-next-launcher 5162)
    (sp-rnd-flt spt-rotate-y (degrees 0.0) (degrees 360.0) 1.0)
    )
  )

(defpart 5162
  :init-specs ((sp-rnd-flt spt-rotvel-y (degrees -1.2) (degrees 2.4) 1.0)
    (sp-int spt-timer 1200)
    (sp-int-plain-rnd spt-next-time 25 599 1)
    (sp-launcher-by-id spt-next-launcher 5162)
    )
  )

(defpart 5169
  :init-specs ((sp-tex spt-texture (new 'static 'texture-id :index #xc9 :page #xc))
    (sp-flt spt-num 1.0)
    (sp-flt spt-y (meters 0.025))
    (sp-flt spt-z (meters 0.6))
    (sp-flt spt-scale-x (meters 0.2))
    (sp-flt spt-rot-z (degrees 0.0))
    (sp-copy-from-other spt-scale-y -4)
    (sp-flt spt-r 255.0)
    (sp-flt spt-g 0.0)
    (sp-flt spt-b 0.0)
    (sp-flt spt-a 128.0)
    (sp-int spt-timer 155)
    (sp-cpuinfo-flags sp-cpuinfo-flag-2)
    (sp-int spt-next-time 75)
    (sp-launcher-by-id spt-next-launcher 5163)
    (sp-flt spt-rotate-y (degrees 0.0))
    )
  )

(defpart 5163
  :init-specs ((sp-flt spt-r 64.0) (sp-flt spt-g 0.0) (sp-flt spt-b 0.0) (sp-flt spt-a 128.0))
  )

(defpartgroup group-castle-dial-large
  :id 1203
  :flags (use-local-clock unk-4 unk-6)
  :bounds (static-bspherem 0 0 0 2)
  :rotate ((degrees 90) (degrees 0) (degrees 0))
  :parts ((sp-item 5170 :flags (is-3d launch-asap bit7) :period 300 :length 5)
    (sp-item 5171 :flags (is-3d bit6 bit7))
    (sp-item 5172 :fade-after (meters 100) :flags (bit7) :period 150 :length 5)
    (sp-item 5173 :fade-after (meters 100) :flags (bit7) :period 150 :length 5 :offset 65)
    (sp-item 5174 :fade-after (meters 100) :flags (bit7) :period 150 :length 5 :offset 35)
    )
  )

(defpart 5171
  :init-specs ((sp-tex spt-texture (new 'static 'texture-id :page #xb9a))
    (sp-flt spt-num 1.0)
    (sp-flt spt-scale-x (meters 2.3))
    (sp-flt spt-rot-z (degrees 0.0))
    (sp-copy-from-other spt-scale-y -4)
    (sp-flt spt-r 128.0)
    (sp-flt spt-g 128.0)
    (sp-flt spt-b 128.0)
    (sp-flt spt-a 128.0)
    (sp-int spt-timer 1)
    (sp-cpuinfo-flags sp-cpuinfo-flag-2 aux-list)
    (sp-flt spt-rotate-y (degrees 0.0))
    )
  )

(defpart 5170
  :init-specs ((sp-tex spt-texture (new 'static 'texture-id :index #x1 :page #xb9a))
    (sp-flt spt-num 1.0)
    (sp-flt spt-y (meters 0.05))
    (sp-flt spt-scale-x (meters 0.345))
    (sp-flt spt-scale-y (meters 2.2))
    (sp-flt spt-r 128.0)
    (sp-flt spt-g 128.0)
    (sp-flt spt-b 128.0)
    (sp-flt spt-a 80.0)
    (sp-rnd-flt spt-rotvel-y (degrees -1.2) (degrees 2.4) 1.0)
    (sp-int spt-timer 1200)
    (sp-cpuinfo-flags sp-cpuinfo-flag-2 sp-cpuinfo-flag-4 aux-list left-multiply-quat)
    (sp-int-plain-rnd spt-next-time 25 599 1)
    (sp-launcher-by-id spt-next-launcher 5162)
    (sp-rnd-flt spt-rotate-y (degrees 0.0) (degrees 360.0) 1.0)
    )
  )

(defpart 5172
  :init-specs ((sp-tex spt-texture (new 'static 'texture-id :index #xc9 :page #xc))
    (sp-flt spt-num 1.0)
    (sp-flt spt-y (meters 0.025))
    (sp-flt spt-z (meters 0.8))
    (sp-flt spt-scale-x (meters 0.25))
    (sp-flt spt-rot-z (degrees 0.0))
    (sp-copy-from-other spt-scale-y -4)
    (sp-flt spt-r 255.0)
    (sp-flt spt-g 0.0)
    (sp-flt spt-b 0.0)
    (sp-flt spt-a 128.0)
    (sp-int spt-timer 155)
    (sp-cpuinfo-flags sp-cpuinfo-flag-2)
    (sp-int spt-next-time 75)
    (sp-launcher-by-id spt-next-launcher 5163)
    (sp-flt spt-rotate-y (degrees 0.0))
    )
  )

(defpart 5173
  :init-specs ((sp-tex spt-texture (new 'static 'texture-id :index #xc9 :page #xc))
    (sp-flt spt-num 1.0)
    (sp-flt spt-x (meters 0.3))
    (sp-flt spt-y (meters 0.025))
    (sp-flt spt-z (meters 0.8))
    (sp-flt spt-scale-x (meters 0.25))
    (sp-flt spt-rot-z (degrees 0.0))
    (sp-copy-from-other spt-scale-y -4)
    (sp-flt spt-r 255.0)
    (sp-flt spt-g 0.0)
    (sp-flt spt-b 0.0)
    (sp-flt spt-a 128.0)
    (sp-int spt-timer 155)
    (sp-cpuinfo-flags sp-cpuinfo-flag-2)
    (sp-int spt-next-time 75)
    (sp-launcher-by-id spt-next-launcher 5163)
    (sp-flt spt-rotate-y (degrees 0.0))
    )
  )

(defpart 5174
  :init-specs ((sp-tex spt-texture (new 'static 'texture-id :index #xc9 :page #xc))
    (sp-flt spt-num 1.0)
    (sp-flt spt-x (meters -0.3))
    (sp-flt spt-y (meters 0.025))
    (sp-flt spt-z (meters 0.8))
    (sp-flt spt-scale-x (meters 0.25))
    (sp-flt spt-rot-z (degrees 0.0))
    (sp-copy-from-other spt-scale-y -4)
    (sp-flt spt-r 255.0)
    (sp-flt spt-g 0.0)
    (sp-flt spt-b 0.0)
    (sp-flt spt-a 128.0)
    (sp-int spt-timer 155)
    (sp-cpuinfo-flags sp-cpuinfo-flag-2)
    (sp-int spt-next-time 75)
    (sp-launcher-by-id spt-next-launcher 5163)
    (sp-flt spt-rotate-y (degrees 0.0))
    )
  )
