;;-*-Lisp-*-
(in-package goal)

;; name: bot-h.gc
;; name in dgo: bot-h
;; dgos: ATE, SEB, SWB, LKIDDOGE, UNB, CTYKORA, CTYASHA

;; DECOMP BEGINS

(deftype bot-focus-info (structure)
  ((max-los-dist     float          :offset-assert 0)
   (fproc            basic          :offset-assert 4)
   (bullseye-xz-dist float          :offset-assert 8)
   (ry-diff          float          :offset-assert 12)
   (my-facing-ry     float          :offset-assert 16)
   (bullseye-ry      float          :offset-assert 20)
   (los              int8           :offset-assert 24)
   (update-time      time-frame         :offset-assert 32)
   (bullseye         vector :inline :offset-assert 48)
   (pos              vector :inline :offset-assert 64)
   (my-facing-xz-dir vector :inline :offset-assert 80)
   (bullseye-xz-dir  vector :inline :offset-assert 96)
   )
  :method-count-assert 9
  :size-assert         #x70
  :flag-assert         #x900000070
  )

(deftype bot-spot (structure)
  ((center          vector :inline :offset-assert 0)
   (center-x        float          :offset 0)
   (center-y        float          :offset 4)
   (center-z        float          :offset 8)
   (inside-xz-dist  float          :offset 12)
   (blocked-xz-dist float          :offset-assert 16)
   )
  :method-count-assert 9
  :size-assert         #x14
  :flag-assert         #x900000014
  )

(deftype bot-course (basic)
  ((course-id              uint8   :offset-assert 4)
   (speech-count           uint16  :offset-assert 6)
   (spot-count             uint16  :offset-assert 8)
   (retry-cookie           uint8   :offset-assert 10)
   (too-far-warn-speeches  basic   :offset-assert 12)
   (too-far-fail-speeches  basic   :offset-assert 16)
   (attack-player-speeches basic   :offset-assert 20)
   (default-check-too-far  basic   :offset-assert 24)
   (waypoints              basic   :offset-assert 28)
   (speeches               uint32  :offset-assert 32)
   (speech-tunings         uint32  :offset-assert 36)
   (dirs                   uint32  :offset-assert 40)
   (spots                  uint32  :offset-assert 44)
   )
  :method-count-assert 9
  :size-assert         #x30
  :flag-assert         #x900000030
  ;; field default-check-too-far uses ~A with a signed load
  )

(deftype bot (nav-enemy)
  ((bot-flags                       uint32                 :offset-assert 604)
   (min-speed                       float                  :offset-assert 608)
   (max-speed                       float                  :offset-assert 612)
   (follow-offset                   float                  :offset-assert 616)
   (too-far-warn-dist               float                  :offset-assert 620)
   (too-far-fail-dist-delta         float                  :offset-assert 624)
   (too-far-warn-dist-default       float                  :offset-assert 628)
   (too-far-fail-dist-delta-default float                  :offset-assert 632)
   (travel-prev-ry                  float                  :offset-assert 636)
   (travel-prev-ry1                 float                  :offset-assert 640)
   (player-blocking                 float                  :offset-assert 644)
   (ai-ctrl                         basic                  :offset-assert 648)
   (course                          basic                  :offset-assert 652)
   (waypoint                        basic                  :offset-assert 656)
   (waypoint-bits                   uint32                 :offset-assert 660)
   (waypoint-int32a                 int32                  :offset-assert 664)
   (bot-task-bits                   uint32                 :offset-assert 668)
   (hit-invuln-ignore-me-delay      uint32                 :offset-assert 672)
   (hit-invuln-focus-disable-delay  uint32                 :offset-assert 676)
   (warn-to-fail-timeout            uint32                 :offset-assert 680)
   (warn-min-delay                  uint32                 :offset-assert 684)
   (warn-max-delay                  uint32                 :offset-assert 688)
   (spot-color                      uint32                 :offset-assert 692)
   (waypoint-request                int16                  :offset-assert 696)
   (hit-by-enemy-count              uint16                 :offset-assert 698)
   (hit-by-player-count             uint16                 :offset-assert 700)
   (notice-enemy-dist               float                  :offset-assert 704)
   (channel                         uint8                  :offset-assert 708)
   (focus-mode                      int8                   :offset-assert 709)
   (nav-mesh-index                  int8                   :offset-assert 710)
   (delay-too-far-check             int8                   :offset-assert 711)
   (slave-id                        int8                   :offset-assert 712)
   (vehicle-seat-index              int8                   :offset-assert 713)
   (bot-health-index                int8                   :offset-assert 714)
   (task                            basic                  :offset-assert 716)
   (swivel-joint-mod                basic                  :offset-assert 720)
   (health-handle                   uint64                 :offset-assert 728)
   (poi-handle                      uint64                 :offset-assert 736)
   (my-simple-focus                 uint32                 :offset-assert 744)
   (attacker-handle                 uint64                 :offset-assert 752)
   (scene-player-handle             uint64                 :offset-assert 760)
   (master-handle                   uint64                 :offset-assert 768)
   (vehicle-handle                  uint64                 :offset-assert 776)
   (hit-invuln-starting-time        time-frame                 :offset-assert 784)
   (danger-time                     time-frame                 :offset-assert 792)
   (attacker-time                   time-frame                 :offset-assert 800)
   (started-warning-time            time-frame                 :offset-assert 808)
   (waypoint-time0                  uint64                 :offset-assert 816)
   (next-too-far-warn-time          time-frame                 :offset-assert 824)
   (spot                            bot-spot       :inline :offset-assert 832)
   (follow-dir                      vector         :inline :offset-assert 864)
   (focus-info                      bot-focus-info :inline :offset-assert 880)
   )
  :method-count-assert 225
  :size-assert         #x3e0
  :flag-assert         #xe1036003e0
  (:methods
    (bot-method-178 () none 178)
    (bot-method-179 () none 179)
    (bot-method-180 () none 180)
    (bot-method-181 () none 181)
    (bot-method-182 () none 182)
    (bot-method-183 () none 183)
    (bot-method-184 () none 184)
    (bot-method-185 () none 185)
    (bot-method-186 () none 186)
    (bot-method-187 () none 187)
    (bot-method-188 () none 188)
    (bot-method-189 () none 189)
    (bot-method-190 () none 190)
    (bot-method-191 () none 191)
    (bot-method-192 () none 192)
    (bot-method-193 () none 193)
    (bot-method-194 () none 194)
    (bot-method-195 () none 195)
    (bot-method-196 () none 196)
    (bot-method-197 () none 197)
    (bot-method-198 () none 198)
    (bot-method-199 () none 199)
    (bot-method-200 () none 200)
    (bot-method-201 () none 201)
    (bot-method-202 () none 202)
    (bot-method-203 () none 203)
    (bot-method-204 () none 204)
    (bot-method-205 () none 205)
    (bot-method-206 () none 206)
    (bot-method-207 () none 207)
    (bot-method-208 () none 208)
    (bot-method-209 () none 209)
    (bot-method-210 () none 210)
    (bot-method-211 () none 211)
    (bot-method-212 () none 212)
    (bot-method-213 () none 213)
    (bot-method-214 () none 214)
    (bot-method-215 () none 215)
    (bot-method-216 () none 216)
    (bot-method-217 () none 217)
    (bot-method-218 () none 218)
    (bot-method-219 () none 219)
    (bot-method-220 () none 220)
    (bot-method-221 () none 221)
    (bot-method-222 () none 222)
    (bot-method-223 () none 223)
    (bot-method-224 () none 224)
    )
  )
