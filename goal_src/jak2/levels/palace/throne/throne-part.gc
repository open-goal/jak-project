;;-*-Lisp-*-
(in-package goal)

;; name: throne-part.gc
;; name in dgo: throne-part
;; dgos: THR

;; DECOMP BEGINS

(deftype throne-part (part-spawner)
  ()
  :heap-base #x30
  :method-count-assert 16
  :size-assert         #xb0
  :flag-assert         #x10003000b0
  )


(defpartgroup group-throne-lights
  :id 1133
  :flags (unk-4)
  :bounds (static-bspherem 0 0 0 4)
  :parts ((sp-item 4905 :fade-after (meters 150) :flags (bit6 bit7)))
  )

(defpart 4905
  :init-specs ((:texture (new 'static 'texture-id :index #xbb :page #xc))
    (:num 1.0)
    (:z (meters 0.15))
    (:scale-x (meters 12) (meters 0.1))
    (:rot-x (degrees 1.125))
    (:scale-y :copy scale-x)
    (:r 128.0 32.0)
    (:g :copy r)
    (:b 192.0 32.0)
    (:a 10.0)
    (:omega (degrees 3393))
    (:timer (seconds 0.017))
    (:flags (sp-cpuinfo-flag-2 sp-cpuinfo-flag-3 glow))
    (:userdata 1228.8)
    (:rotate-y (degrees 0))
    )
  )

(defpartgroup group-throne-side-window-small
  :id 1134
  :flags (unk-4)
  :bounds (static-bspherem 0 0 0 128)
  :parts ((sp-item 4906 :fade-after (meters 150) :falloff-to (meters 150) :flags (bit7))
    (sp-item 4907 :fade-after (meters 80) :falloff-to (meters 80) :flags (bit7))
    )
  )

(defpart 4907
  :init-specs ((:num 0.4)
    (:x (meters -4) (meters 8))
    (:y (meters -14) (meters 20))
    (:rot-x 6)
    (:r 3276.8)
    (:g 2457.6)
    (:b 2457.6)
    (:vel-y (meters -0.02))
    (:fade-b 1.6384)
    (:friction 0.99)
    (:timer (seconds 2))
    (:flags (distort))
    (:next-time (seconds 0.167))
    (:next-launcher 4908)
    (:rotate-y (degrees 0) 1 (degrees 0.98876953))
    )
  )

(defpart 4908
  :init-specs ((:fade-b -0.14894545))
  )

(defpart 4906
  :init-specs ((:texture (new 'static 'texture-id :index #xc9 :page #xc))
    (:num 0.1 0.5)
    (:x (meters -5) (meters 10))
    (:y (meters -17) (meters 30))
    (:scale-x (meters 1.1))
    (:scale-y :copy scale-x)
    (:r 128.0 32.0)
    (:g :copy r)
    (:b 192.0 32.0)
    (:a 32.0 64.0)
    (:vel-y (meters -0.01))
    (:scalevel-x (meters -0.06666667))
    (:scalevel-y (meters -0.053333335))
    (:friction 0.96)
    (:timer (seconds 2))
    (:flags (sp-cpuinfo-flag-2 sp-cpuinfo-flag-3))
    (:userdata :data (new 'static 'boxed-array :type int32 15 0 0 #xc0c900 #xc02100))
    (:func 'sparticle-texture-animate)
    (:next-time (seconds 0.05))
    (:next-launcher 4909)
    (:rotate-y (degrees 0) 1 (degrees 0.98876953))
    )
  )

(defpart 4909
  :init-specs ((:scale-x (meters 0.1))
    (:scale-y (meters 0.3))
    (:vel-y (meters -0.006666667))
    (:scalevel-x (meters 0))
    (:scalevel-y (meters -0.00033333333))
    (:friction 0.96)
    (:timer (seconds 2))
    (:next-time (seconds 1.5) (seconds 0.997))
    (:next-launcher 4910)
    )
  )

(defpart 4910
  :init-specs ((:scale-x (meters 0.1))
    (:scale-y (meters 0.3))
    (:vel-y (meters -0.006666667))
    (:scalevel-y (meters -0.00033333333))
    (:friction 0.96)
    (:timer (seconds 2))
    (:next-time (seconds 1.5) (seconds 0.997))
    (:next-launcher 4911)
    )
  )

(defpart 4911
  :init-specs ((:scale-x (meters 0.1))
    (:scale-y (meters 0.3))
    (:vel-y (meters -0.016666668))
    (:scalevel-y (meters -0.00033333333))
    (:friction 0.96)
    (:timer (seconds 2))
    (:next-time (seconds 1.5) (seconds 0.997))
    (:next-launcher 4912)
    )
  )

(defpart 4912
  :init-specs ((:scale-x (meters 0.1))
    (:scale-y (meters 0.3))
    (:vel-y (meters -0.04))
    (:scalevel-y (meters -0.00033333333))
    (:fade-a -0.21333334)
    (:friction 0.96)
    (:timer (seconds 2))
    )
  )

(defpartgroup group-throne-center-window
  :id 1135
  :flags (unk-4)
  :bounds (static-bspherem 0 0 0 128)
  :parts ((sp-item 4913 :fade-after (meters 150) :falloff-to (meters 150) :flags (bit7))
    (sp-item 4914 :fade-after (meters 80) :falloff-to (meters 80) :flags (bit7))
    )
  )

(defpart 4914
  :init-specs ((:num 1.5)
    (:x (meters -10) (meters 20))
    (:y (meters -14) (meters 20))
    (:rot-x 6)
    (:r 3276.8)
    (:g 2457.6)
    (:b 2457.6)
    (:vel-y (meters -0.02))
    (:fade-b 1.6384)
    (:friction 0.99)
    (:timer (seconds 2))
    (:flags (distort))
    (:next-time (seconds 0.167))
    (:next-launcher 4908)
    (:rotate-y (degrees 0) 1 (degrees 0.98876953))
    )
  )

(defpart 4913
  :init-specs ((:texture (new 'static 'texture-id :index #xc9 :page #xc))
    (:num 0.1 1.5)
    (:x (meters -12) (meters 24))
    (:y (meters -17) (meters 30))
    (:scale-x (meters 1.1))
    (:scale-y :copy scale-x)
    (:r 128.0 32.0)
    (:g :copy r)
    (:b 192.0 32.0)
    (:a 32.0 64.0)
    (:vel-y (meters -0.01))
    (:scalevel-x (meters -0.06666667))
    (:scalevel-y (meters -0.053333335))
    (:friction 0.96)
    (:timer (seconds 2))
    (:flags (sp-cpuinfo-flag-2 sp-cpuinfo-flag-3))
    (:userdata :data (new 'static 'boxed-array :type int32 15 0 0 #xc0c900 #xc02100))
    (:func 'sparticle-texture-animate)
    (:next-time (seconds 0.05))
    (:next-launcher 4909)
    (:rotate-y (degrees 0) 1 (degrees 0.98876953))
    )
  )

(defpartgroup group-throne-top-flat-window
  :id 1136
  :flags (unk-4)
  :bounds (static-bspherem 0 0 0 128)
  :parts ((sp-item 4915 :fade-after (meters 150) :falloff-to (meters 150) :flags (bit7))
    (sp-item 4916 :fade-after (meters 80) :falloff-to (meters 80) :flags (bit7))
    )
  )

(defpart 4916
  :init-specs ((:num 0.05)
    (:x (meters -4) (meters 8))
    (:y (meters -4) (meters 8))
    (:z (meters 0))
    (:rot-x 6)
    (:r 2048.0)
    (:g 1433.6)
    (:b 1433.6)
    (:fade-b 0.8192)
    (:friction 0.99)
    (:timer (seconds 2))
    (:flags (distort))
    (:next-time (seconds 0.167))
    (:next-launcher 4908)
    (:rotate-y (degrees 0) 1 (degrees 0.98876953))
    )
  )

(defpart 4915
  :init-specs ((:texture (new 'static 'texture-id :index #x21 :page #xc))
    (:num 0.05 0.1)
    (:x (meters -5) (meters 10))
    (:y (meters -5) (meters 10))
    (:z (meters 0))
    (:scale-x (meters 1.2))
    (:scale-y :copy scale-x)
    (:r 128.0 32.0)
    (:g :copy r)
    (:b 192.0 32.0)
    (:a 32.0 64.0)
    (:scalevel-x (meters -0.06666667))
    (:scalevel-y :copy scalevel-x)
    (:friction 0.96)
    (:timer (seconds 2))
    (:flags (sp-cpuinfo-flag-2 sp-cpuinfo-flag-3))
    (:userdata :data (new 'static 'boxed-array :type int32 15 0 0 #xc0c900 #xc02100))
    (:func 'sparticle-texture-animate)
    (:next-time (seconds 0.05))
    (:next-launcher 4917)
    (:rotate-y (degrees 0) 1 (degrees 0.98876953))
    )
  )

(defpart 4917
  :init-specs ((:scale-x (meters 0.15) (meters 0.1))
    (:scale-y (meters 0.15))
    (:scalevel-x (meters 0))
    (:scalevel-y (meters 0))
    (:fade-a -0.10666667)
    (:timer (seconds 4))
    )
  )

(defpartgroup group-throne-mid-flat-window
  :id 1137
  :flags (unk-4)
  :bounds (static-bspherem 0 0 0 128)
  :parts ((sp-item 4918 :fade-after (meters 150) :falloff-to (meters 150) :flags (bit7))
    (sp-item 4919 :fade-after (meters 80) :falloff-to (meters 80) :flags (bit7))
    )
  )

(defpart 4919
  :init-specs ((:num 0.1)
    (:x (meters -3) (meters 6))
    (:y (meters -4) (meters 8))
    (:z (meters 0))
    (:rot-x 6)
    (:r 2048.0)
    (:g 1433.6)
    (:b 1433.6)
    (:fade-b 0.8192)
    (:friction 0.99)
    (:timer (seconds 2))
    (:flags (distort))
    (:next-time (seconds 0.167))
    (:next-launcher 4908)
    (:rotate-y (degrees 0) 1 (degrees 0.98876953))
    )
  )

(defpart 4918
  :init-specs ((:texture (new 'static 'texture-id :index #x21 :page #xc))
    (:num 0.1 0.2)
    (:x (meters -4) (meters 8))
    (:y (meters -5) (meters 10))
    (:z (meters 0))
    (:scale-x (meters 1.2))
    (:scale-y :copy scale-x)
    (:r 128.0 32.0)
    (:g :copy r)
    (:b 192.0 32.0)
    (:a 32.0 64.0)
    (:scalevel-x (meters -0.06666667))
    (:scalevel-y :copy scalevel-x)
    (:friction 0.96)
    (:timer (seconds 4))
    (:flags (sp-cpuinfo-flag-2 sp-cpuinfo-flag-3))
    (:userdata :data (new 'static 'boxed-array :type int32 15 0 0 #xc0c900 #xc02100))
    (:func 'sparticle-texture-animate)
    (:next-time (seconds 0.05))
    (:next-launcher 4920)
    (:rotate-y (degrees 0) 1 (degrees 0.98876953))
    )
  )

(defpart 4920
  :init-specs ((:scale-x (meters 0.15) (meters 0.1))
    (:scale-y (meters 0.15))
    (:scalevel-x (meters 0))
    (:scalevel-y (meters 0))
    (:fade-a -0.10666667)
    (:timer (seconds 4))
    )
  )

(defpartgroup group-throne-diag-window
  :id 1138
  :flags (unk-4)
  :bounds (static-bspherem 0 0 0 128)
  :parts ((sp-item 4921 :fade-after (meters 150) :falloff-to (meters 150) :flags (bit7))
    (sp-item 4922 :fade-after (meters 80) :falloff-to (meters 80) :flags (bit7))
    )
  )

(defpart 4922
  :init-specs ((:num 0.25)
    (:x (meters -2.5) (meters 5))
    (:y (meters -4) (meters 8))
    (:rot-x 6)
    (:r 2048.0)
    (:g 1433.6)
    (:b 1433.6)
    (:vel-x (meters 0.01))
    (:fade-b 0.8192)
    (:friction 0.99)
    (:timer (seconds 2))
    (:flags (distort))
    (:next-time (seconds 0.167))
    (:next-launcher 4923)
    (:rotate-y (degrees 0) 1 (degrees 0.98876953))
    )
  )

(defpart 4923
  :init-specs ((:fade-b -0.074472725))
  )

(defpart 4921
  :init-specs ((:texture (new 'static 'texture-id :index #x21 :page #xc))
    (:num 0.1 0.4)
    (:x (meters -3) (meters 5.5))
    (:y (meters -5) (meters 10))
    (:scale-x (meters 0.1) (meters 0.1))
    (:scale-y :copy scale-x)
    (:r 128.0 32.0)
    (:g :copy r)
    (:b 192.0 32.0)
    (:a 32.0 64.0)
    (:vel-x (meters 0.006666667))
    (:friction 0.95 0.03)
    (:timer (seconds 4))
    (:flags (sp-cpuinfo-flag-2 sp-cpuinfo-flag-3))
    (:userdata :data (new 'static 'boxed-array :type int32 15 0 0 #xc0c900 #xc02100))
    (:func 'sparticle-texture-animate)
    (:next-time (seconds 0.05))
    (:next-launcher 4924)
    (:rotate-y (degrees 0) 1 (degrees 0.98876953))
    )
  )

(defpart 4924
  :init-specs ((:timer (seconds 4)) (:next-time (seconds 2)) (:next-launcher 4925))
  )

(defpart 4925
  :init-specs ((:fade-a -0.21333334 -0.21333334))
  )

(defun throne-deactivate ()
  "Sets  [[*math-camera*.f]] to `10,000` meters"
  (set! (-> *math-camera* f) (meters 10000))
  0
  (none)
  )

(defun throne-activate ()
  "Sets  [[*math-camera*.f]] to `20,000` meters"
  (set! (-> *math-camera* f) (meters 20000))
  0
  (none)
  )
